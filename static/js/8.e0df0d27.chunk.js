(this["webpackJsonp@material-appkit/cra-quickstart"]=this["webpackJsonp@material-appkit/cra-quickstart"]||[]).push([[8],{278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(u){r=!0,l=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=m(n(304)),o=m(n(2)),i=n(0),u=m(i),s=m(n(132)),c=m(n(320)),f=m(n(294)),d=n(42),p=m(n(306));function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,d.makeStyles)({containedInputLabelShrink:{transform:"translate(14px, 8px) scale(0.75) !important"},containedInputInput:{padding:"24px 14px 12px 14px"}});function y(e){var t=h(),n=e.clearable,o=e.InputLabelProps,d=e.InputProps,m=e.onChange,y=e.onChangeDelay,v=e.StartIcon,b=e.value,g=e.valueTransformer,C=e.variant,O=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["clearable","InputLabelProps","InputProps","onChange","onChangeDelay","StartIcon","value","valueTransformer","variant"]),j=(0,i.useState)(b),P=r(j,2),E=P[0],w=P[1];(0,i.useEffect)((function(){b!==E&&I(b)}),[b]);var k=(0,i.useRef)((0,l.default)((function(e){m(e)}),y,{leading:!1,trailing:!0})),I=function(e,t){var n=e;g&&(n=g(n)),w(n),y?k.current(n):m(n,t)},S=d?a({},d):{},x=o?a({},o):{};v&&(S.startAdornment=u.default.createElement(c.default,{position:"start"},u.default.createElement(v,null)));var D=C;return"contained"===D&&(S.notched=!1,S.classes?S.classes.input=t.containedInputInput:S.classes={input:t.containedInputInput},x.classes?x.classes.shrink=t.containedInputLabelShrink:x.classes={shrink:t.containedInputLabelShrink},D="outlined"),n&&(S.endAdornment=E?u.default.createElement(c.default,{position:"end"},u.default.createElement(s.default,{edge:"end",onClick:function(){return I("")},size:"small"},u.default.createElement(p.default,{fontSize:"small"}))):null),u.default.createElement(f.default,a({InputProps:S,InputLabelProps:x,onChange:function(e){return I(e.target.value,e)},value:E,variant:D},O))}y.propTypes={clearable:o.default.bool,onTimeout:o.default.func,onChangeDelay:o.default.number,StartIcon:o.default.elementType,value:o.default.oneOfType([o.default.string,o.default.number]),valueTransformer:o.default.func,variant:o.default.oneOf(["contained","filled","outlined","standard"])},y.defaultProps={clearable:!1,onChangeDelay:0,value:"",variant:"standard"},t.default=y},288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(u){r=!0,l=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=E(n(2)),o=n(0),i=E(o),u=E(n(225)),s=E(n(133)),c=E(n(157)),f=E(n(156)),d=E(n(155)),p=E(n(154)),m=E(n(132)),h=E(n(224)),y=E(n(43)),v=n(42),b=E(n(308)),g=E(n(348)),C=E(n(278)),O=E(n(309)),j=E(n(289)),P=E(n(287));function E(e){return e&&e.__esModule?e:{default:e}}var w=(0,v.makeStyles)((function(e){return{filterFieldContainer:{backgroundColor:e.palette.background.paper,borderBottom:"2px solid "+e.palette.grey[200],padding:e.spacing(1)+"px "+e.spacing(2)+"px"},fullHeight:{height:"calc(100% - "+e.spacing(12)+"px)"},dialogTitle:{backgroundColor:e.palette.grey[300],padding:0},dialogTitleContentContainer:{alignItems:"center",display:"flex",justifyContent:"space-between",padding:e.spacing(.5,2)},dialogTitleContent:{fontSize:e.typography.pxToRem(20),fontWeight:500},dialogContent:{padding:0},dialogActions:{borderTop:"1px solid "+e.palette.grey[300],justifyContent:"space-between"},tabsControlContainer:{backgroundColor:e.palette.grey[200],borderBottom:"1px solid "+e.palette.grey[300]}}}));function k(e){var t=e.apiCreateUrl,n=e.commitOnSelect,l=e.filterParams,v=e.dialogProps,E=e.fullHeight,k=e.onDismiss,I=e.listItemProps,S=e.searchFilterParam,x=e.selectionMode,D=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["apiCreateUrl","commitOnSelect","filterParams","dialogProps","fullHeight","onDismiss","listItemProps","searchFilterParam","selectionMode"]),T=(0,o.useState)(null),_=r(T,2),A=_[0],R=_[1],U=(0,o.useState)(null),F=r(U,2),M=F[0],L=F[1],V=(0,o.useState)(!1),N=r(V,2),q=N[0],K=(N[1],(0,o.useState)(!1)),W=r(K,2),B=W[0],z=W[1],G=(0,o.useState)(l),H=r(G,2),J=H[0],Y=H[1],Q=(0,o.useState)(null),X=r(Q,2),Z=X[0],$=X[1],ee=(0,o.useRef)(null);(0,o.useEffect)((function(){if(A){var t="function"===typeof e.title?e.title():e.title;$(t)}else $("Loading...")}),[A]);var te=function(){var e=Array.from(A.selection);k(e)},ne=w();return i.default.createElement(o.Fragment,null,i.default.createElement(c.default,a({open:!0,classes:E?{paper:ne.fullHeight}:null,onClose:function(){k(null)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),te())},ref:ee},v),i.default.createElement(p.default,{className:ne.dialogTitle,disableTypography:!0},i.default.createElement(u.default,{className:ne.dialogTitleContentContainer},i.default.createElement(u.default,{flex:"1"},i.default.createElement(y.default,{component:"h3",className:ne.dialogTitleContent},Z),"multiple"===x&&A&&i.default.createElement(y.default,{variant:"subtitle2",color:"textSecondary"},A.selection.size+" selected")),i.default.createElement(m.default,{onClick:function(){return k(null)},edge:"end"},i.default.createElement(b.default,null))),i.default.createElement(h.default,{className:ne.progressBar,variant:q?"indeterminate":"determinate",value:0}),e.searchFilterParam&&i.default.createElement(u.default,{className:ne.filterFieldContainer},i.default.createElement(C.default,{autoFocus:!0,fullWidth:!0,margin:"dense",onChange:function(e){Y(a({},J,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},S,e)))},StartIcon:g.default,variant:"outlined"})),M&&M.tabsControl&&i.default.createElement(u.default,{className:ne.tabsControlContainer},M.tabsControl)),i.default.createElement(d.default,{className:ne.dialogContent},i.default.createElement(P.default,a({},D,{filterParams:J,listItemProps:a({},I||{},{commitOnSelect:e.commitOnSelect}),onConfig:R,onPageChange:function(e){Y(a({},J,{page:e}))},onSelectionChange:function(e){n&&k(Array.from(e))},onToolbarChange:L,selectionDisabled:!1,selectionMode:n?"single":x,selectOnClick:!0}))),i.default.createElement(f.default,{className:ne.dialogActions},t&&i.default.createElement(s.default,{onClick:function(){z(!0)}},"Create"),M&&M.paginationControl?M.paginationControl:i.default.createElement(O.default,null),!n&&i.default.createElement(s.default,{color:"primary",disabled:!(A&&A.selection.size),key:"commitButton",onClick:function(){return te()}},"Choose"))),B&&i.default.createElement(j.default,a({apiCreateUrl:t,entityType:e.entityType,onClose:function(){z(!1)},onSave:function(e){A.extendSelection(e)}},e.editDialogProps)))}k.propTypes={apiCreateUrl:l.default.string,commitOnSelect:l.default.bool,dialogProps:l.default.object,entityType:l.default.string,fullHeight:l.default.bool,onDismiss:l.default.func,searchFilterParam:l.default.string,selectionMode:l.default.oneOf(["single","multiple"]),title:l.default.oneOfType([l.default.string,l.default.func])},k.defaultProps={commitOnSelect:!1,dialogProps:{fullWidth:!0},fullHeight:!0,selectionMode:"multiple"},t.default=k},289:function(e,t,n){"use strict";var a=n(275);Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(u){r=!0,l=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=O(n(2)),i=n(0),u=O(i),s=(n(56),O(n(133))),c=O(n(157)),f=O(n(156)),d=O(n(155)),p=O(n(154)),m=O(n(43)),h=n(42),y=O(n(106)),v=O(n(107)),b=O(n(273)),g=O(n(310)),C=O(n(309));function O(e){return e&&e.__esModule?e:{default:e}}var j=(0,h.makeStyles)((function(e){return{paper:{minWidth:320,width:480,overflow:"visible"},dialogTitle:{margin:0},dialogTitleHeading:{fontSize:e.typography.pxToRem(18)},dialogContent:{overflow:"visible"},deleteButton:{color:e.palette.error.main}}}));function P(e){var t=this,n=(0,i.useRef)(null),o=(0,i.useState)(!1),h=l(o,2),O=h[0],P=h[1],E=null;e.title?E=e.title:(E=e.entityType,E=e.persistedObject||e.apiDetailUrl?e.labels.UPDATE+" "+E:e.labels.ADD+" "+E);var w=function(){var n,r=(n=a.mark((function n(){var r;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.persistedObject,t.next=3,b.default.delete(r.url);case 3:e.onDelete&&e.onDelete(r),k();case 5:case"end":return t.stop()}}),n,t)})),function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function a(r,l){try{var o=e[r](l),i=o.value}catch(u){return void n(u)}if(!o.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(i)}("next")}))});return function(){return r.apply(this,arguments)}}(),k=function(){e.onClose(t)},I=e.commitOnEnter,S=e.FormProps,x=(e.onSave,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["commitOnEnter","FormProps","onSave"])),D=j();return u.default.createElement(c.default,{classes:{paper:D.paper},onClose:function(){k()},onKeyDown:I?function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),n.current.save())}:null,open:!0},u.default.createElement(p.default,{className:D.dialogTitle,disableTypography:!0},u.default.createElement(m.default,{className:D.dialogTitleHeading},E)),u.default.createElement(d.default,{className:D.dialogContent,dividers:!0},u.default.createElement(g.default,r({ref:n,onLoad:function(t,n){e.onLoad&&e.onLoad(t,n)},onWillSave:function(){P(!0)},onSave:function(t,n){P(!1),e.onSave&&e.onSave(t,n),k()},onError:function(t){P(!1);var n=e.labels.SAVE_FAIL_NOTIFICATION,a=t.response?t.response.jsonData:{};Object.keys(a).forEach((function(t){var r=a[t];e.labels[r]&&(n=e.labels[r])})),v.default.error(n),e.onError&&e.onError(t)}},S,x))),u.default.createElement(f.default,null,e.persistedObject&&e.canDelete&&u.default.createElement(s.default,{className:D.deleteButton,onClick:function(){y.default.confirm({title:"Please Confirm",description:"Are you sure you want to delete this item?",confirmButtonTitle:"Delete",onDismiss:function(e){e&&w()}})}},e.labels.DELETE),u.default.createElement(C.default,null),u.default.createElement(s.default,{onClick:function(){return k()}},e.labels.CANCEL),u.default.createElement(s.default,{color:"primary",disabled:O,onClick:function(){return n.current.save()}},O?e.labels.SAVING:e.labels.SAVE)))}P.propTypes={apiCreateUrl:o.default.string,apiDetailUrl:o.default.string,canDelete:o.default.bool,commitOnEnter:o.default.bool,entityType:o.default.string,FormProps:o.default.object,labels:o.default.object,onDelete:o.default.func,onError:o.default.func,onLoad:o.default.func,onSave:o.default.func,onClose:o.default.func.isRequired,persistedObject:o.default.object,title:o.default.string},P.defaultProps={canDelete:!0,commitOnEnter:!0,FormProps:{},labels:{ADD:"Add",CANCEL:"Cancel",DELETE:"Delete",E_CREATE_DUPLICATE_RECORD:"Refused to create duplicate record",SAVE:"Save",SAVING:"Saving...",SAVE_FAIL_NOTIFICATION:"Unable to save",UPDATE:"Update"}},t.default=P},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),l=(a=r)&&a.__esModule?a:{default:a};t.default=function(){return l.default.createElement("div",{style:{flexGrow:1}})}},310:function(e,t,n){"use strict";var a=n(275);Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldMetadataMap=t.getFieldNames=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=C(n(279)),u=C(n(349)),s=C(n(2)),c=C(n(0)),f=C(n(350)),d=C(n(351)),p=C(n(352)),m=C(n(380)),h=C(n(381)),y=C(n(273)),v=n(136),b=n(280),g=n(313);function C(e){return e&&e.__esModule?e:{default:e}}function O(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(r,l){try{var o=t[r](l),i=o.value}catch(u){return void n(u)}if(!o.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(i)}("next")}))}}var j=t.getFieldNames=function e(t,n){if(!t&&!n)throw new Error("Unable to determine form field names. You must supply field arrangement or a map of field metadata");if(n){var a=[];return n.forEach((function(n){if(Array.isArray(n))a.push.apply(a,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e(t,n)));else{var r="undefined"===typeof n?"undefined":o(n);"string"===r?"---"!==n&&a.push(n):"object"===r&&a.push(n.name)}})),a}return t.filter((function(e){return!e.read_only})).map((function(e){return e.key}))},P=t.getFieldMetadataMap=function(e){return e?(0,v.arrayToObject)(e,"key"):null},E=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.setValues=function(e){var t=r({},l.state.formData,e);l.setState({formData:t})},l.setValue=function(e,t){l.setValues(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))},l.load=O(a.mark((function e(){var t,o,i,u,s,c,f,d,p,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({loading:!0}),t=l.props,o=t.defaultValues,i=t.optionsRequestParams,u=t.onLoad,s=t.persistedObject,c=s,(f=[]).push(y.default.options(l.requestUrl,r({},i,{action:l.detailUrl?"update":"create"}))),c||(l.detailUrl?f.push(y.default.get(l.detailUrl)):(c=r({},o),Object.keys(c).forEach((function(e){var t=c[e];"function"===typeof t&&(c[e]=t())})))),e.next=8,Promise.all(f);case 8:if(d=e.sent,p=d[0].jsonData,d.length>1&&(c=d[1].jsonData),m=l.initialData(p,c)){e.next=14;break}throw new Error("Failed to initialize form");case 14:l.setState({formData:m,loading:!1,metadata:p,referenceObject:c}),u&&u(c,P(p));case 16:case"end":return e.stop()}}),e,n)}))),l.save=O(a.mark((function e(){var t,r,o,u,s,c,f,d,p,m,h;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.props.updateMethod,r=l.state,o=r.formData,u=r.metadata,s=r.referenceObject,l.setState({errors:{},saving:!0}),c=null,f=null,l.detailUrl?"PATCH"===t?(d=l.initialData(u,s),p={},Object.keys(o).forEach((function(e){var t=o[e];(0,i.default)(t,d[e])||(p[e]=t)})),f=p,c="PATCH"):(f=o,c="PUT"):(f=o,c="POST"),c&&l.requestUrl&&f){e.next=8;break}throw new Error("Missing one or more required parameters for form request");case 8:return e.prev=8,f=l.coerceRequestData(f),l.props.onWillSave&&l.props.onWillSave(f),e.next=13,y.default.request(c,l.requestUrl,f);case 13:return m=e.sent,h=m.jsonData,l.setState({saving:!1,referenceObject:h}),l.props.onSave&&l.props.onSave(h,m),e.abrupt("return",h);case 20:e.prev=20,e.t0=e.catch(8),l.setState({saving:!1,errors:e.t0.response?e.t0.response.jsonData:{}}),l.props.onError&&l.props.onError(e.t0);case 24:case"end":return e.stop()}}),e,n,[[8,20]])}))),l.handleFormSubmit=function(e){e.preventDefault(),e.stopPropagation(),l.save()},l.handleFormChange=function(e){e.stopPropagation(),l.detailUrl&&l.props.autosaveDelay&&(l.autoSaveTimer&&clearTimeout(l.autoSaveTimer),l.autoSaveTimer=setTimeout((function(){l.state.saving||l.save()}),l.props.autosaveDelay))},l.handleFormFieldChange=function(e,t){var n=r({},l.state.errors);delete n[t.key],l.setState({errors:n}),l.props.onFieldChange&&l.props.onFieldChange(e,t)},l.state={errors:{},referenceObject:null,formData:null,initialData:null,metadata:null,loading:!1,saving:!1},l.autoSaveTimer=null,l.formRef=c.default.createRef(),l}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,null,[{key:"registerWidgetClass",value:function(e,t){this.widgetClassMap[e]=t}},{key:"widgetClassForType",value:function(e){return e?this.widgetClassMap[e]:null}}]),l(t,[{key:"componentDidMount",value:function(){this.load(),this.props.onMount&&this.props.onMount(this)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount&&this.props.onUnmount(this),this.autoSaveTimer&&(clearTimeout(this.autoSaveTimer),this.autoSaveTimer=null)}},{key:"componentDidUpdate",value:function(){this.props.onConfig&&this.props.onConfig({requestUrl:this.requestUrl})}},{key:"initialData",value:function(e,t){var n=this,a={},r=j(e,this.props.fieldArrangement),l=P(e);return r.forEach((function(e){var r=l[e],o=t[e];a[e]=(0,g.fromRepresentation)(o,r,n)})),(0,u.default)(a)}},{key:"coerceRequestData",value:function(e){var t=this,n=r({},e),a=P(this.state.metadata);return a&&Object.keys(e).forEach((function(r){var l=a[r],o=e[r];l&&(n[r]=(0,g.toRepresentation)(o,l,t))})),Object.assign(n,this.props.extraRequestParams),n}},{key:"render",value:function(){return this.state.loading||!this.state.referenceObject?null:c.default.createElement("form",{onSubmit:this.handleFormSubmit,onChange:this.handleFormChange,ref:this.formRef},c.default.createElement(this.props.FieldSetComponent,{errors:this.state.errors,fieldArrangement:this.props.fieldArrangement,form:this,onFieldChange:this.handleFormFieldChange,metadata:this.state.metadata,representedObject:this.state.referenceObject}),this.props.children)}},{key:"detailUrl",get:function(){var e=this.props,t=e.apiDetailUrl,n=e.apiDetailUrlPath,a=e.persistedObject,r=this.props.representedObjectId;!r&&a&&(r=a.id);var l=null;return t?l=t:a&&a.url?l=a.url:n&&r&&(l=(0,b.reverse)(n,{pk:r})),l}},{key:"requestUrl",get:function(){return this.detailUrl||this.props.apiCreateUrl}}]),t}(c.default.PureComponent);E.widgetClassMap={checkboxgroup:f.default,itemlist:p.default,modelselect:m.default,radiogroup:h.default},E.propTypes={apiCreateUrl:s.default.string,apiDetailUrl:s.default.string,apiDetailUrlPath:s.default.string,autosaveDelay:s.default.number,children:s.default.any,defaultValues:s.default.object,entityType:s.default.string,extraRequestParams:s.default.object,FieldSetComponent:s.default.func,fieldArrangement:s.default.array,fieldInfoProvider:s.default.func,onFieldChange:s.default.func,onConfig:s.default.func,onError:s.default.func,onLoad:s.default.func,onMount:s.default.func,onSave:s.default.func,onWillSave:s.default.func,onUnmount:s.default.func,optionsRequestParams:s.default.object,persistedObject:s.default.object,representedObjectId:s.default.number,updateMethod:s.default.oneOf(["PUT","PATCH"])},E.defaultProps={autosaveDelay:null,defaultValues:{},extraRequestParams:{},entityType:"",FieldSetComponent:d.default,optionsRequestParams:{},updateMethod:"PATCH"},t.default=E},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRepresentation=t.fromRepresentation=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=m(n(2)),o=n(0),i=m(o),u=m(n(291)),s=m(n(296)),c=m(n(398)),f=m(n(294)),d=n(42),p=n(67);function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){var t=e.ui.widget;return t?"string"===typeof t?t:t.type:"textfield"};t.fromRepresentation=function(e,t,n){var a=h(t),l=n.constructor.widgetClassForType(a);if(l&&l.hasOwnProperty("fromRepresentation"))return l.fromRepresentation(e,t);switch(a){case"itemlist":return e||[];case"select":return e?"object"===("undefined"===typeof e?"undefined":r(e))?e.url:e:"";case"checkboxgroup":return e.map((function(e){return e.url}));default:if("checkbox"===t.type)switch(e){case!0:case"true":case"True":return"switch"===a||"true";case!1:case void 0:case"false":case"False":case"":return"switch"!==a&&"false";default:throw new Error("Invalid boolean value: "+e)}return e||""}},t.toRepresentation=function(e,t,n){var a=h(t),r=n.constructor.widgetClassForType(a);if(r&&r.hasOwnProperty("toRepresentation"))return r.toRepresentation(e,t);var l=e;switch(!(0,p.isValue)(l)&&(0,p.isValue)(t.default)&&(l=t.default),t.type){case"date":case"datetime":return(0,p.isValue)(l)?l:"";case"number":return(0,p.isValue)(l)?parseFloat(l):null;default:return l}};var y=(0,d.makeStyles)((function(e){return e.form}));function v(e){var t=e.errorText,n=e.fieldArrangementInfo,l=(e.fieldIndex,e.fieldInfo),d=e.form,p=e.onChange,m=h(l),v=function(e){var t=e.ui,n=t.label,a=t.widget;return a&&"object"===("undefined"===typeof a?"undefined":r(a))&&a.label?a.label:n}(l),b=l.key,g=d.state.formData,C={name:b,value:g[b]};if(l.hidden||"hidden"===m)return i.default.createElement("input",a({type:"hidden"},C));Object.assign(C,{error:!!t,helperText:t||l.ui.help,label:v});var O=function(e){d.setValue(b,e),p(e,l)},j=n.widget;if(j||(j=d.constructor.widgetClassForType(m)),j)return i.default.createElement(j,a({fieldInfo:l,onChange:O},C,n));switch(m){case"switch":return function(e,t,n){return i.default.createElement(u.default,{row:!0},i.default.createElement(s.default,{control:i.default.createElement(c.default,{checked:e.value,onChange:function(e){n(e.target.checked)}}),label:e.label}))}(C,0,O);default:return function(e,t,n,r){var l=h(t),u=y(),s=a({},e,{fullWidth:!0,InputLabelProps:{classes:{root:u.inputLabel}},margin:"none",onChange:function(e){r(e.target.value)},type:t.type,variant:"outlined"});return t.choices&&(s.select=!0,s.SelectProps={native:!0}),"textarea"===l&&(s.multiline=!0,s.rows=2,s.rowsMax=20),"number"===t.type&&(s.inputProps={min:0,step:"any"}),"checkbox"===t.type&&(s.select=!0,s.SelectProps={native:!0},t.choices=[{label:"Yes",value:"true"},{label:"No",value:"false"}]),i.default.createElement(f.default,s,t.choices&&i.default.createElement(o.Fragment,null,i.default.createElement("option",null),t.choices.map((function(e){return i.default.createElement("option",{key:e.value,value:e.value},e.label)}))))}(C,l,0,O)}}v.propTypes={errorText:l.default.any,fieldArrangementInfo:l.default.object.isRequired,fieldInfo:l.default.object.isRequired,fieldIndex:l.default.number.isRequired,form:l.default.object.isRequired,onChange:l.default.func.isRequired},t.default=v},335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(u){r=!0,l=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=d(n(4)),o=d(n(2)),i=n(0),u=d(i),s=(n(66),d(n(152))),c=n(42),f=(n(236),n(286));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,c.makeStyles)((function(e){return{masterDetailView:(t={},n=e.breakpoints.up("md"),a={display:"flex",height:"100%",overflow:"auto"},n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t),listViewContainer:{borderRight:"1px solid "+e.palette.grey[400],height:"100%",overflow:"auto"},detailViewContainer:{flex:1,overflow:"auto"}};var t,n,a}));function m(e){var t=p(),n=e.className,o=e.detailViewPlaceholder,c=e.DetailViewComponent,d=e.detailViewProps,m=e.ListViewComponent,h=e.listViewContainerClassName,y=e.listViewProps,v=e.listViewSelectionInitializer,b=e.onDetailViewClose,g=e.onListViewSelectionChange,C=e.showDetailView,O=(0,i.useState)(null),j=r(O,2),P=j[0],E=j[1],w=(0,i.useState)(null),k=r(w,2),I=k[0],S=k[1],x=(0,i.useState)(!0),D=r(x,2),T=D[0],_=D[1],A=(0,i.useRef)(null);if(void 0===C)return null;var R=u.default.createElement(m,a({listItemSelectionControl:!1,onSelectionChange:function(e){var t=e.size?(0,f.pluck)(e):null;C&&(_(!1),S(t?u.default.createElement(c,a({representedObject:t,onClose:b},d)):o)),g&&g(e)},selectionMode:"single",selectionInitializer:v},y));return C?u.default.createElement("div",{className:(0,l.default)(t.masterDetailView,n)},u.default.createElement("div",{className:(0,l.default)(t.listViewContainer,h)},R),u.default.createElement(s.default,{in:T,onExited:function(){E(I),S(null),_(!0)}},u.default.createElement("div",{className:t.detailViewContainer,ref:A},P))):R}m.propTypes={className:o.default.string,DetailViewComponent:o.default.elementType.isRequired,detailViewPlaceholder:o.default.element,detailViewProps:o.default.object,listViewContainerClassName:o.default.string,ListViewComponent:o.default.elementType.isRequired,listViewProps:o.default.object,listViewSelectionInitializer:o.default.func,onDetailViewClose:o.default.func,onListViewSelectionChange:o.default.func,showDetailView:o.default.bool.isRequired},m.defaultProps={detailViewProps:{},listViewProps:{}},t.default=u.default.memo(m)},350:function(e,t,n){"use strict";var a=n(275);Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(u){r=!0,l=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=k(n(4)),u=n(0),s=k(u),c=k(n(2)),f=k(n(133)),d=k(n(225)),p=k(n(317)),m=k(n(274)),h=k(n(296)),y=k(n(291)),v=k(n(224)),b=k(n(281)),g=k(n(43)),C=n(42),O=k(n(312)),j=k(n(289)),P=k(n(273)),E=n(136),w=n(269);function k(e){return e&&e.__esModule?e:{default:e}}var I=(0,C.makeStyles)((function(e){return{defaultFieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend,borderlessFieldset:{border:"none",padding:0},formGroup:{padding:"0 "+e.spacing(.5)+"px"},checkbox:{padding:e.spacing(.5)},linearProgress:{flex:1}}}));function S(e,t){var n=o({},e);return t?(Object.keys(t).forEach((function(a){n[t[a]]=e[a]})),n):n}function x(e){var t=this,n=e.fieldInfo,c=e.label,C=(0,u.useState)(n.choices||null),k=l(C,2),x=k[0],D=k[1],T=(0,u.useState)(!1),_=l(T,2),A=_[0],R=_[1],U=x?(0,E.arrayToObject)(x,"label"):{},F=x?(0,E.arrayToObject)(x,"value"):{},M={};n.ui&&"object"===r(n.ui.widget)&&(M=n.ui.widget);var L,V=M.exclusionMap||{},N=M.implicitSelectionMap||{},q=new Set(e.value||[]),K=M.list_endpoint;!K&&n.related_endpoint&&(K=n.related_endpoint.singular+"/"),(0,w.useInit)((L=a.mark((function e(){var r,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.choices){e.next=4;break}D(n.choices),e.next=13;break;case 4:if(!K){e.next=12;break}return r=M.filter_params||{},e.next=8,P.default.get(K,r);case 8:l=e.sent,D(l.jsonData.map((function(e){return S(e,M.choice_map)}))),e.next=13;break;case 12:throw new Error('"choices" or "related_endpoint" must be present in fieldInfo');case 13:case"end":return e.stop()}}),e,t)})),function(){var e=L.apply(this,arguments);return new Promise((function(t,n){return function a(r,l){try{var o=e[r](l),i=o.value}catch(u){return void n(u)}if(!o.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(i)}("next")}))}));var W=function(e){var t=!0,n=!1,a=void 0;try{for(var r,l=Object.keys(N)[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value,i=U[o].value;if(q.has(i)){var u=!0,s=!1,c=void 0;try{for(var f,d=N[o][Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value,m=U[p];if(e.value===m.value)return!0}}catch(h){s=!0,c=h}finally{try{!u&&d.return&&d.return()}finally{if(s)throw c}}}}}catch(h){n=!0,a=h}finally{try{!t&&l.return&&l.return()}finally{if(n)throw a}}return!1},B=function(t){return function(n){var a=new Set(q);if(n.target.checked){a.add(t.value);var r=t.label,l=V[r];l&&Array.from(a).forEach((function(e){var t=F[e];-1!==l.indexOf(t.label)&&a.delete(e)}));var o=N[r];o&&o.forEach((function(e){var t=U[e];a.add(t.value)}))}else a.delete(t.value);e.onChange(Array.from(a))}},z=function(){R(!1)},G=I(),H=[];!1===M.border?H.push(G.borderlessFieldset):H.push(G.defaultFieldset);var J=o({},M.formGroupProps||{});return J.className=G.formGroup,s.default.createElement(m.default,{fullWidth:!0,margin:"none"},s.default.createElement("fieldset",{className:(0,i.default)(H)},c&&s.default.createElement("legend",{className:G.legend},c),x?s.default.createElement(u.Fragment,null,s.default.createElement(y.default,J,x.map((function(e){var t={};M.minLabelWidth&&(t.minWidth=M.minLabelWidth);var n=s.default.createElement(g.default,{style:t},e.label);return e.tooltip&&(n=s.default.createElement(b.default,{title:e.tooltip},n)),s.default.createElement(h.default,{key:e.value,control:s.default.createElement(p.default,{disabled:W(e),className:G.checkbox,checked:q.has(e.value),onChange:B(e),value:e.value}),label:n})}))),K&&M.create_endpoint&&s.default.createElement(u.Fragment,null,s.default.createElement(f.default,{color:"primary",onClick:function(){R(!0)},size:"small",startIcon:s.default.createElement(O.default,null)},"Add ",M.entity_type,"..."),A&&s.default.createElement(j.default,{apiCreateUrl:M.create_endpoint,defaultValues:M.filter_params,entityType:M.entity_type,onClose:z,onSave:function(e){var t=S(e,M.choice_map);D([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(x),[t])),z()}}))):s.default.createElement(d.default,{display:"flex",alignItems:"center",height:30},s.default.createElement(v.default,{className:G.linearProgress}))))}x.propTypes={fieldInfo:c.default.object.isRequired,label:c.default.string,onChange:c.default.func.isRequired,value:c.default.any},t.default=x},351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=c(n(2)),l=c(n(0)),o=c(n(248)),i=c(n(321)),u=c(n(313)),s=n(310);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=e.errors,n=e.fieldInfoProvider,r=e.form,c=e.onFieldChange,f=e.metadata,d=(0,s.getFieldMetadataMap)(f),p=e.fieldArrangement;p||(p=[],f.forEach((function(e){if(!e.read_only){var t=e.key;n?p.push(n(e)):p.push({name:t})}})));var m=function(e,t){c(e,t)};return l.default.createElement(i.default,{container:!0},function e(n,s,c){return n.map((function(n,f){var p=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s),[f]),h=p.join(":");if(Array.isArray(n))return e(n,p,{xs:12,md:Math.floor(12/n.length)});"string"===typeof n&&(n={name:n});var y=n.name;return l.default.createElement(i.default,a({container:!0,item:!0,key:h,xs:12,style:{padding:8}},c),"---"===y?l.default.createElement(o.default,{style:{margin:"16px 0 16px 0",flexGrow:1}}):l.default.createElement(u.default,{errorText:t[y],form:r,fieldIndex:f,fieldInfo:d[y],fieldArrangementInfo:n,onChange:m}))}))}(p,[0]))}f.propTypes={errors:r.default.object,form:r.default.object.isRequired,fieldArrangement:r.default.array,fieldInfoProvider:r.default.func,onFieldChange:r.default.func.isRequired,metadata:r.default.array},t.default=f},352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=p(n(279)),o=p(n(0)),i=p(n(2)),u=p(n(274)),s=p(n(353)),c=n(136),f=p(n(292)),d=p(n(377));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectRef=o.default.createRef(),n.handleItemListAdd=n.handleItemListAdd.bind(n),n.handleItemListRemove=n.handleItemListRemove.bind(n),n.handleItemListUpdate=n.handleItemListUpdate.bind(n),n.dispatchChangeEvent=n.dispatchChangeEvent.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"toRepresentation",value:function(e){return e.map((function(e){return e.url}))}}]),r(t,[{key:"componentDidUpdate",value:function(e){(0,l.default)(this.props.value,e.value)||this.updateOptions(this.props.value)}},{key:"updateOptions",value:function(e){for(var t=this.selectRef.current,n=t.options,a=n.length-1;a>=0;--a)t.remove(n[a]);e.forEach((function(e){var n=document.createElement("option");n.value=e.url,n.text=e.url,n.selected=!0,t.add(n)}));var r=new Event("change",{bubbles:!0,cancelable:!0});t.dispatchEvent(r)}},{key:"handleItemListAdd",value:function(e){var t=this.props.value.slice().concat(e);this.dispatchChangeEvent(t)}},{key:"handleItemListRemove",value:function(e){var t=(0,c.removeObject)(this.props.value,"id",e.id);this.dispatchChangeEvent(t)}},{key:"handleItemListUpdate",value:function(e,t){var n=this.props.value.slice();n[t]=e,this.dispatchChangeEvent(n)}},{key:"dispatchChangeEvent",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.label;return o.default.createElement(u.default,{fullWidth:!0,margin:"none"},o.default.createElement("fieldset",{className:t.fieldset},n&&o.default.createElement("legend",{className:t.legend},n),o.default.createElement("select",{multiple:!0,name:this.props.name,ref:this.selectRef,style:{display:"none"}}),o.default.createElement(d.default,{apiCreateUrl:this.props.createUrl,apiListUrl:this.listUrl,clickAction:"edit",editDialogProps:this.props.editDialogProps,entityType:this.props.entityType,filterParams:this.props.filterParams,items:this.props.value,itemKeyPath:this.props.itemKeyPath,listDialogProps:a({fullWidth:!0},this.props.listDialogProps),listItemComponent:this.props.listItemComponent,listItemProps:this.props.listItemProps,mode:"edit",onAdd:this.handleItemListAdd,onRemove:this.handleItemListRemove,onUpdate:this.handleItemListUpdate,searchFilterParam:this.props.searchFilterParam,titleKey:this.props.titleKey})))}},{key:"listUrl",get:function(){return this.props.fieldInfo.related_endpoint.singular+"/"}}]),t}(o.default.PureComponent);m.propTypes={classes:i.default.object.isRequired,createUrl:i.default.string,editDialogProps:i.default.object,entityType:i.default.string.isRequired,filterParams:i.default.object,itemKeyPath:i.default.string,listDialogProps:i.default.object,listItemComponent:i.default.func,listItemProps:i.default.object,label:i.default.string,name:i.default.string.isRequired,onChange:i.default.func,searchFilterParam:i.default.string,titleKey:i.default.any.isRequired,value:i.default.array.isRequired},m.defaultProps={editDialogProps:{},filterParams:{},listDialogProps:{},listItemComponent:f.default,listItemProps:{}},t.default=(0,s.default)((function(e){return{fieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend}}))(m)},377:function(e,t,n){"use strict";var a=n(275);Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=S(n(4)),i=S(n(2)),u=n(0),s=S(u),c=n(56),f=S(n(133)),d=S(n(132)),p=S(n(223)),m=S(n(135)),h=S(n(138)),y=S(n(134)),v=S(n(139)),b=S(n(43)),g=n(42),C=S(n(312)),O=S(n(378)),j=S(n(379)),P=S(n(106)),E=S(n(273)),w=n(82),k=S(n(289)),I=S(n(288));function S(e){return e&&e.__esModule?e:{default:e}}function x(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(r,l){try{var o=t[r](l),i=o.value}catch(u){return void n(u)}if(!o.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(i)}("next")}))}}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var _=(0,g.makeStyles)((function(e){return{listItem:{padding:e.spacing(.25,0)},listItemWithIcon:{display:"inline-grid",gridColumnGap:4,gridTemplateColumns:"24px 1fr"},listItemEditable:{display:"inline-grid",gridColumnGap:4,gridTemplateColumns:"24px 1fr min-content"},listItemText:{margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},removeIconRoot:{minWidth:"unset","&:hover":{color:e.palette.primary.main,cursor:"pointer"}},editIconButton:{marginRight:e.spacing(.5),padding:e.spacing(.25),"&:hover":{color:e.palette.primary.main}},listItemIconRoot:{alignSelf:"baseline",minWidth:20},listItemIcon:{fontSize:e.typography.pxToRem(22)}}}));function A(e){var t=e.item,n=e.onChange,a=_(),r=null;if(e.component)r=s.default.createElement(e.component,l({item:t,onChange:n},e.componentProps));else{var i=b.default,u=l({},e.componentProps,{onClick:function(){e.onClick(t)},onChange:n});t.path?(i=p.default,u.component=c.Link,u.to=t.path,u.target="_blank",u.noWrap=!0):t.media_url&&(i=p.default,u.href=t.media_url,u.rel="noopener",u.target="_blank");var f=null;f="function"===typeof e.titleKey?e.titleKey(t):(0,w.valueForKeyPath)(t,e.titleKey),r=s.default.createElement(v.default,{className:a.listItemText,primary:s.default.createElement(i,u,f)})}var m=[a.listItem];return e.icon&&m.push(a.listItemWithIcon),"edit"===e.mode&&"edit"===e.clickAction&&m.push(a.listItemEditable),s.default.createElement(h.default,l({className:(0,o.default)(m)},e.listItemProps),"view"===e.mode&&e.icon&&s.default.createElement(y.default,{classes:{root:a.listItemIconRoot}},s.default.createElement(e.icon,{className:a.listItemIcon})),e.onRemove&&"edit"===e.mode&&s.default.createElement(y.default,{"aria-label":"Delete",classes:{root:a.removeIconRoot},onClick:function(){e.onRemove(t)}},s.default.createElement(O.default,null)),r,"edit"===e.mode&&"edit"===e.clickAction&&s.default.createElement("div",null,s.default.createElement(d.default,{"aria-label":"Edit",className:a.editIconButton,edge:"end",onClick:function(){e.onEdit(t)}},s.default.createElement(j.default,null))))}A.propTypes={clickAction:i.default.string,component:i.default.func,componentProps:i.default.object,icon:i.default.object,item:i.default.object.isRequired,listItemProps:i.default.object,mode:i.default.oneOf(["view","edit"]),onClick:i.default.func.isRequired,onChange:i.default.func,onEdit:i.default.func,onRemove:i.default.func,titleKey:i.default.any},A.defaultProps={listItemProps:{}};var R=function(e){function t(){var e,n,r,l=this;D(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={editDialogOpen:!1,editingObject:null,listDialogOpen:!1},r.keyForItem=function(e){var t=r.props.itemIdKey;return"function"===typeof t?t(e):e[t]},r.attachRecords=function(){var e=x(a.mark((function e(t){var n,o,i,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!r.attachUrl){e.next=13;break}return n=t.map((function(e){return e.id})),o=1===n.length?n[0]:n,e.next=8,E.default.post(r.attachUrl,{item_id:o});case 8:i=e.sent,u=i.jsonData,r.props.onAdd&&r.props.onAdd(u),e.next=14;break;case 13:r.props.onAdd&&r.props.onAdd(t);case 14:r.handleEditDialogClose();case 15:case"end":return e.stop()}}),e,l)})));return function(t){return e.apply(this,arguments)}}(),r.removeRecord=function(){var e=x(a.mark((function e(t){var n,o,i,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,o=n.canDelete,i=n.onRemove,!r.detachUrl){e.next=9;break}return e.next=5,E.default.delete(r.detachUrl,{item_id:t.id});case 5:u=e.sent,t=u.jsonData,e.next=12;break;case 9:if(!o||!t.url){e.next=12;break}return e.next=12,E.default.delete(t.url);case 12:i&&i(t);case 13:case"end":return e.stop()}}),e,l)})));return function(t){return e.apply(this,arguments)}}(),r.handleRemoveButtonClick=function(){var e=x(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.warnOnDelete?P.default.confirm({title:"Please Confirm",description:"Are you sure you want to remove this item?",confirmButtonTitle:"Remove",onDismiss:function(e){e&&r.removeRecord(t)}}):r.removeRecord(t);case 1:case"end":return e.stop()}}),e,l)})));return function(t){return e.apply(this,arguments)}}(),r.handleEditButtonClick=function(e){"edit"===r.props.mode&&"edit"===r.props.clickAction&&r.setState({editDialogOpen:!0,editingObject:e})},r.handleAddButtonClick=function(){r.props.apiListUrl?r.setState({listDialogOpen:!0}):r.setState({editDialogOpen:!0,editingObject:null})},r.handleListDialogDismiss=function(e){e&&r.attachRecords(e),r.setState({listDialogOpen:!1})},r.handleItemClick=function(e){r.props.onItemClick&&r.props.onItemClick(e)},r.handleItemChange=function(e){var t=r.items,n=t.findIndex((function(t){return t.id===e.id}));-1!==n&&(t[n]=e,r.props.onUpdate&&r.props.onUpdate(e,n))},r.handleEditDialogClose=function(){r.setState({editDialogOpen:!1})},T(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.classes,t.clickAction),a=t.mode;return s.default.createElement(u.Fragment,null,s.default.createElement(m.default,{disablePadding:!0,className:this.props.className},this.items.map((function(t){return s.default.createElement(A,{clickAction:n,component:e.props.itemComponent,componentProps:e.props.itemComponentProps,key:e.keyForItem(t),icon:e.props.itemIcon,item:t,itemKeyPath:e.props.itemKeyPath,listItemProps:e.props.itemListItemProps,mode:a,onChange:e.handleItemChange,onClick:e.handleItemClick,onEdit:e.handleEditButtonClick,onRemove:e.handleRemoveButtonClick,titleKey:e.props.titleKey})}))),"edit"===a&&s.default.createElement(u.Fragment,null,this.props.onAdd&&s.default.createElement(f.default,{color:"primary",onClick:this.handleAddButtonClick,size:"small",startIcon:s.default.createElement(C.default,null)},"Add ",this.props.entityType),this.props.apiListUrl&&this.state.listDialogOpen&&s.default.createElement(I.default,l({apiCreateUrl:this.props.apiCreateUrl,filterParams:this.props.filterParams,displayMode:"list",editDialogProps:this.props.editDialogProps,entityType:this.props.entityType,listItemComponent:this.props.listItemComponent,listItemProps:this.props.listItemProps,onDismiss:this.handleListDialogDismiss,searchFilterParam:this.props.searchFilterParam,src:this.props.apiListUrl,title:"Choose "+this.props.entityType},this.props.listDialogProps))),this.state.editDialogOpen&&s.default.createElement(this.props.EditDialogComponent,l({apiCreateUrl:this.props.apiCreateUrl,apiDetailUrl:this.state.editingObject?this.state.editingObject.url:null,entityType:this.props.entityType,onClose:this.handleEditDialogClose,onSave:this.handleItemChange},this.props.editDialogProps)))}},{key:"attachUrl",get:function(){var e=this.props,t=e.apiAttachSuffix,n=e.representedObject;return void 0===t||null===t?null:n.url+t}},{key:"detachUrl",get:function(){var e=this.props,t=e.apiDetachSuffix,n=e.representedObject;return void 0===t||null===t?null:n.url+t}},{key:"items",get:function(){var e=this.props,t=e.items,n=e.itemKeyPath;return n?t.map((function(e){return(0,w.valueForKeyPath)(e,n)})):t}}]),t}(s.default.PureComponent);R.propTypes={apiCreateUrl:i.default.string,apiListUrl:i.default.string,apiAttachSuffix:i.default.string,apiDetachSuffix:i.default.string,canDelete:i.default.bool,className:i.default.string,clickAction:i.default.oneOf(["link","edit"]),EditDialogComponent:i.default.func,editDialogProps:i.default.object,entityType:i.default.string,filterParams:i.default.object,itemComponent:i.default.func,itemComponentProps:i.default.object,itemListItemProps:i.default.object,itemIcon:i.default.object,items:i.default.array.isRequired,itemIdKey:i.default.oneOfType([i.default.string,i.default.func]),itemKeyPath:i.default.string,listDialogProps:i.default.object,listItemComponent:i.default.func,listItemProps:i.default.object,onItemClick:i.default.func,onAdd:i.default.func,onRemove:i.default.func,onUpdate:i.default.func,mode:i.default.oneOf(["view","edit"]),representedObject:i.default.object,searchFilterParam:i.default.string,titleKey:i.default.any,warnOnDelete:i.default.bool},R.defaultProps={canDelete:!1,clickAction:"link",EditDialogComponent:k.default,editDialogProps:{},filterParams:{},itemIdKey:"id",itemComponentProps:{},itemListItemProps:{disableGutters:!0},listItemProps:{},listDialogProps:{},mode:"view",warnOnDelete:!0},t.default=R},380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=m(n(0)),o=m(n(2)),i=m(n(225)),u=m(n(133)),s=m(n(274)),c=m(n(132)),f=n(42),d=m(n(308)),p=m(n(288));function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClearButtonClick=function(){n.selectedModel=null},n.handleListDialogDismiss=function(e){e&&e.length&&(n.selectedModel=e[0]),n.setState({listDialogOpen:!1})},n.state={listDialogOpen:!1,selectedModel:e.value,buttonLabel:""},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"toRepresentation",value:function(e){return e?e.url:null}}]),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.fieldInfo,o=t.label,f=t.listDialogProps,m=r.related_endpoint.singular+"/";return l.default.createElement(s.default,{fullWidth:!0,margin:"none"},l.default.createElement("fieldset",{className:n.fieldset},o&&l.default.createElement("legend",{className:n.legend},o),l.default.createElement(i.default,{display:"flex",alignItems:"center",justifyContent:"space-between"},l.default.createElement(u.default,{color:"primary",className:n.button,onClick:function(){e.setState({listDialogOpen:!0})},size:"small"},this.buttonLabel),this.selectedModel&&l.default.createElement(c.default,{className:n.clearButton,onClick:function(){e.selectedModel=null}},l.default.createElement(d.default,null)))),this.state.listDialogOpen&&l.default.createElement(p.default,a({},f,{apiCreateUrl:m,onDismiss:this.handleListDialogDismiss,selectionMode:"single",src:m,title:"Select "+r.ui.label})))}},{key:"buttonLabel",get:function(){var e=this.state.selectedModel,t=this.props,n=t.listDialogProps,a=t.titleKey;return e?"function"===typeof a?a(e):e[a]:"Choose "+(n.entityType||"Option")+"..."}},{key:"selectedModel",get:function(){return this.state.selectedModel},set:function(e){this.setState({selectedModel:e}),this.props.onChange&&this.props.onChange(e)}}]),t}(l.default.PureComponent);h.propTypes={classes:o.default.object.isRequired,label:o.default.string,listDialogProps:o.default.object,titleKey:o.default.oneOfType([o.default.func,o.default.string]),value:o.default.any},h.defaultProps={listDialogProps:{}},t.default=(0,f.withStyles)((function(e){return{fieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend,button:{minWidth:"initial"},clearButton:{padding:6}}}))(h)},381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(u){r=!0,l=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(0),l=f(r),o=f(n(2)),i=f(n(274)),u=f(n(296)),s=f(n(318)),c=f(n(395));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,n(42).makeStyles)((function(e){return{fieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend,radioGroup:{padding:"0 "+e.spacing(1)+"px"},radio:{padding:e.spacing(.5)}}}));function p(e){var t=e.fieldInfo,n=e.label,o=e.onChange,f=d(),p=(0,r.useState)(e.value),m=a(p,2),h=m[0],y=m[1];return l.default.createElement(i.default,{fullWidth:!0,margin:"none"},l.default.createElement("fieldset",{className:f.fieldset},n&&l.default.createElement("legend",{className:f.legend},n),l.default.createElement(c.default,{className:f.radioGroup,row:"row"===t.ui.direction,value:h},t.choices.map((function(e){return l.default.createElement(u.default,{control:l.default.createElement(s.default,{onClick:function(){!function(e){var t=e.value;t===h&&(t=null),y(t),o(t)}(e)},className:f.radio}),key:e.value,label:e.label,value:e.value})})))))}p.propTypes={fieldInfo:o.default.object.isRequired,label:o.default.string,onChange:o.default.func.isRequired,value:o.default.any},t.default=p},416:function(e,t,n){"use strict";n.r(t);var a=n(23),r=n(6),l=n(334),o=n(0),i=n.n(o),u=n(112),s=n(227),c=n(335),f=n.n(c),d=n(47),p=n.n(d),m=n(271),h=n.n(m),y=n(280),v=n(286),b=n(65),g=n(244),C=n(116),O=n(246),j=n(287),P=n.n(j),E=n(288),w=n.n(E),k=n(270),I=n.n(k),S=n(54),x=n.n(S),D=n(393),T=n(241),_=n(242),A=n(292),R=n.n(A);var U=function(e){var t=e.displayRate,n=Object(D.a)(e,["displayRate"]),l=e.item,o=l.currency,i=l.rate;return Object(r.jsxs)(R.a,Object(a.a)(Object(a.a)({},Object(A.listItemProps)(n)),{},{children:[Object(r.jsx)(T.a,{children:Object(r.jsx)("img",{alt:"",className:"flag flag-".concat(o)})}),Object(r.jsx)(_.a,{primary:o,secondary:t?i:null})]}))},F=(n(316),n(50)),M=Object(u.a)((function(e){return{toolbar:{paddingLeft:12},listViewLoading:{opacity:.5}}}));function L(e){var t=M(),n=p.a.qsParams.base,l=Object(o.useState)(!1),i=Object(b.a)(l,2),u=i[0],s=i[1];Object(o.useEffect)((function(){if(!n){var e=x.a.localValue("baseCurrency");e||(e="USD",x.a.setLocalValue("baseCurrency",e)),p.a.updateUrlParam("base",e)}}),[n]);var c=function(e){var t=e.jsonData.rates;return{items:Object.keys(t).filter((function(e){return e.toUpperCase()!==n.toUpperCase()})).sort().map((function(e){return{base:n,currency:e,rate:t[e]}}))}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(I.a,{bar:Object(r.jsx)(g.a,{position:"relative",color:"default",elevation:1,children:n&&Object(r.jsx)(O.a,{className:t.toolbar,disableGutters:!0,variant:"dense",children:Object(r.jsx)(C.a,{onClick:function(){return s(!0)},startIcon:Object(r.jsx)("img",{alt:"",className:"flag flag-".concat(n)}),children:"Base Currency"})})}),barSize:48,placement:"top",scrollContent:!0,children:n&&Object(r.jsx)(P.a,Object(a.a)(Object(a.a)({},e),{},{classes:{listViewLoading:t.listViewLoading},displayMode:"list",itemIdKey:"currency",listItemComponent:U,listItemProps:{displayRate:!0},responseTransformer:c,src:"".concat(F.b,"/latest"),filterParams:{base:n}}))}),u&&Object(r.jsx)(w.a,{displayMode:"list",itemIdKey:"currency",listItemComponent:U,onDismiss:function(e){if(e){var t=e[0].currency;p.a.updateUrlParam("base",t),x.a.setLocalValue("baseCurrency",t)}s(!1)},responseTransformer:c,selectionMode:"single",src:"".concat(F.b,"/latest"),title:"Select a base currency"})]})}var V=i.a.memo(L),N=n(319),q=n(46),K=n(114),W=n.n(K),B=Object(u.a)((function(e){return{main:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",padding:e.spacing(1)},accountBalanceIcon:{fontSize:e.typography.pxToRem(120),marginBottom:10}}}));var z=function(e){var t=B();return Object(r.jsxs)("main",{className:t.main,children:[Object(r.jsx)(W.a,{className:t.accountBalanceIcon}),Object(r.jsx)(q.a,{variant:"h1",children:"Foreign Currency Exchange"})]})},G=n(48),H=n(36),J=Object(u.a)((function(e){return{listViewContainer:{width:300}}}));t.default=function(e){var t=J(),n=Object(o.useContext)(G.a).breakpoint,i=Object(s.c)("md",n),u=p.a.qsParams,c=u.base,d=u.currency;return Object(r.jsx)(h.a,Object(a.a)(Object(a.a)({title:"Foreign Exchange"},e),{},{children:Object(r.jsx)(f.a,{DetailViewComponent:N.a,detailViewPlaceholder:Object(r.jsx)(z,{}),listViewSelectionInitializer:function(e){var t,n=new Set,a=Object(l.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.currency===d&&n.add(r)}}catch(o){a.e(o)}finally{a.f()}return n},listViewContainerClassName:t.listViewContainer,ListViewComponent:V,onListViewSelectionChange:function(e){if(e.size){var t=Object(v.pluck)(e);if(i)d!==t.currency&&p.a.updateUrlParam("currency",t.currency);else{var n=Object(y.reverse)(H.a.forex.currency,{currency:t.currency});p.a.navigate(n,{base:c})}}else d&&p.a.clearUrlParam("currency")},showDetailView:i})}))}}}]);