(this["webpackJsonp@material-appkit/quickstart-create-react-app"]=this["webpackJsonp@material-appkit/quickstart-create-react-app"]||[]).push([[9],{276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(u){r=!0,o=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=P(n(2)),l=n(0),i=P(l),u=P(n(250)),s=P(n(125)),c=P(n(136)),f=P(n(134)),d=P(n(133)),p=P(n(135)),m=P(n(126)),h=P(n(200)),y=P(n(45)),v=n(39),b=P(n(295)),g=P(n(336)),C=P(n(337)),E=P(n(296)),O=P(n(277)),j=P(n(275));function P(e){return e&&e.__esModule?e:{default:e}}var w=(0,v.makeStyles)((function(e){return{filterFieldContainer:{backgroundColor:e.palette.background.paper,borderBottom:"2px solid "+e.palette.grey[200],padding:e.spacing(1)+"px "+e.spacing(2)+"px"},fullHeight:{height:"calc(100% - "+e.spacing(12)+"px)"},dialogTitle:{backgroundColor:e.palette.grey[300],padding:0},dialogTitleContentContainer:{alignItems:"center",display:"flex",justifyContent:"space-between",padding:e.spacing(.5,2)},dialogTitleContent:{fontSize:e.typography.pxToRem(20),fontWeight:500},dialogContent:{padding:0},dialogActions:{borderTop:"1px solid "+e.palette.grey[300],justifyContent:"space-between"},tabsControlContainer:{backgroundColor:e.palette.grey[200],borderBottom:"1px solid "+e.palette.grey[300]}}}));function k(e){var t=e.commitOnSelect,n=e.filterParams,o=e.dialogProps,v=e.fullHeight,P=e.onDismiss,k=e.listItemProps,I=e.searchFilterParam,x=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["commitOnSelect","filterParams","dialogProps","fullHeight","onDismiss","listItemProps","searchFilterParam"]),D=(0,l.useState)(null),S=r(D,2),T=S[0],_=S[1],A=(0,l.useState)(null),R=r(A,2),U=R[0],M=R[1],F=(0,l.useState)(!1),V=r(F,2),N=V[0],L=(V[1],(0,l.useState)(!1)),q=r(L,2),K=q[0],W=q[1],B=(0,l.useState)(n),z=r(B,2),G=z[0],H=z[1],J=(0,l.useState)(null),Y=r(J,2),Q=Y[0],X=Y[1],Z=(0,l.useRef)(null);(0,l.useEffect)((function(){if(T){var t="function"===typeof e.title?e.title():e.title;X(t)}else X("Loading...")}),[T]);var $=function(){var e=Array.from(T.selection);P(e)},ee=w();return i.default.createElement(l.Fragment,null,i.default.createElement(c.default,a({open:!0,classes:v?{paper:ee.fullHeight}:null,onClose:function(){P(null)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),$())},ref:Z},o),i.default.createElement(p.default,{className:ee.dialogTitle,disableTypography:!0},i.default.createElement(u.default,{className:ee.dialogTitleContentContainer},i.default.createElement(u.default,{flex:"1"},i.default.createElement(y.default,{component:"h3",className:ee.dialogTitleContent},Q),"multiple"===e.selectionMode&&T&&i.default.createElement(y.default,{variant:"subtitle2",color:"textSecondary"},T.selection.size+" selected")),i.default.createElement(m.default,{onClick:function(){return P(null)},edge:"end"},i.default.createElement(b.default,null))),i.default.createElement(h.default,{className:ee.progressBar,variant:N?"indeterminate":"determinate",value:0}),e.searchFilterParam&&i.default.createElement(u.default,{className:ee.filterFieldContainer},i.default.createElement(C.default,{autoFocus:!0,fullWidth:!0,margin:"dense",onChange:function(e){H(a({},G,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},I,e)))},StartIcon:g.default,variant:"outlined"})),U&&U.tabsControl&&i.default.createElement(u.default,{className:ee.tabsControlContainer},U.tabsControl)),i.default.createElement(d.default,{className:ee.dialogContent},i.default.createElement(j.default,a({},x,{filterParams:G,listItemProps:a({},k||{},{commitOnSelect:e.commitOnSelect}),onConfig:_,onPageChange:function(e){H(a({},G,{page:e}))},onSelectionChange:function(e){t&&P(Array.from(e))},onToolbarChange:M,paginated:e.paginated,selectionDisabled:!1,selectionMode:t?"single":e.selectionMode,selectOnClick:!0}))),i.default.createElement(f.default,{className:ee.dialogActions},e.apiCreateUrl&&i.default.createElement(s.default,{onClick:function(){W(!0)}},"Create"),U&&U.paginationControl?U.paginationControl:i.default.createElement(E.default,null),!t&&i.default.createElement(s.default,{color:"primary",disabled:!(T&&T.selection.size),key:"commitButton",onClick:function(){return $()}},"Choose"))),K&&i.default.createElement(O.default,a({apiCreateUrl:e.apiCreateUrl,entityType:e.entityType,onClose:function(){W(!1)},onSave:function(e){T.extendSelection(e)}},e.editDialogProps)))}k.propTypes={apiCreateUrl:o.default.string,commitOnSelect:o.default.bool,dialogProps:o.default.object,displayMode:o.default.string,entityType:o.default.string,fullHeight:o.default.bool,onDismiss:o.default.func,paginated:o.default.bool,searchFilterParam:o.default.string,selectOnClick:o.default.bool,selectionMode:o.default.oneOf(["single","multiple"]),title:o.default.oneOfType([o.default.string,o.default.func])},k.defaultProps={commitOnSelect:!1,dialogProps:{fullWidth:!0},displayMode:"list",fullHeight:!0,paginated:!0,selectionMode:"multiple",selectOnClick:!0},t.default=k},277:function(e,t,n){"use strict";var a=n(243);Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(u){r=!0,o=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=E(n(2)),i=n(0),u=E(i),s=(n(46),E(n(125))),c=E(n(136)),f=E(n(134)),d=E(n(133)),p=E(n(135)),m=E(n(45)),h=n(39),y=E(n(99)),v=E(n(90)),b=E(n(249)),g=E(n(297)),C=E(n(296));function E(e){return e&&e.__esModule?e:{default:e}}var O=(0,h.makeStyles)((function(e){return{paper:{minWidth:320,width:480,overflow:"visible"},dialogTitle:{margin:0},dialogTitleHeading:{fontSize:e.typography.pxToRem(18)},dialogContent:{overflow:"visible"},deleteButton:{color:e.palette.error.main}}}));function j(e){var t=this,n=(0,i.useRef)(null),l=(0,i.useState)(!1),h=o(l,2),E=h[0],j=h[1],P=null;e.title?P=e.title:(P=e.entityType,P=e.persistedObject||e.apiDetailUrl?e.labels.UPDATE+" "+P:e.labels.ADD+" "+P);var w=function(){var n,r=(n=a.mark((function n(){var r;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.persistedObject,t.next=3,b.default.delete(r.url);case 3:e.onDelete&&e.onDelete(r),k();case 5:case"end":return t.stop()}}),n,t)})),function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function a(r,o){try{var l=e[r](o),i=l.value}catch(u){return void n(u)}if(!l.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(i)}("next")}))});return function(){return r.apply(this,arguments)}}(),k=function(){e.onClose(t)},I=e.commitOnEnter,x=e.FormProps,D=(e.onSave,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["commitOnEnter","FormProps","onSave"])),S=O();return u.default.createElement(c.default,{classes:{paper:S.paper},onClose:function(){k()},onKeyDown:I?function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),n.current.save())}:null,open:!0},u.default.createElement(p.default,{className:S.dialogTitle,disableTypography:!0},u.default.createElement(m.default,{className:S.dialogTitleHeading},P)),u.default.createElement(d.default,{className:S.dialogContent,dividers:!0},u.default.createElement(g.default,r({ref:n,onLoad:function(t,n){e.onLoad&&e.onLoad(t,n)},onWillSave:function(){j(!0)},onSave:function(t,n){j(!1),e.onSave&&e.onSave(t,n),k()},onError:function(t){j(!1);var n=e.labels.SAVE_FAIL_NOTIFICATION,a=t.response?t.response.jsonData:{};Object.keys(a).forEach((function(t){var r=a[t];e.labels[r]&&(n=e.labels[r])})),v.default.error(n),e.onError&&e.onError(t)}},x,D))),u.default.createElement(f.default,null,e.persistedObject&&e.canDelete&&u.default.createElement(s.default,{className:S.deleteButton,onClick:function(){y.default.confirm({title:"Please Confirm",description:"Are you sure you want to delete this item?",confirmButtonTitle:"Delete",onDismiss:function(e){e&&w()}})}},e.labels.DELETE),u.default.createElement(C.default,null),u.default.createElement(s.default,{onClick:function(){return k()}},e.labels.CANCEL),u.default.createElement(s.default,{color:"primary",disabled:E,onClick:function(){return n.current.save()}},E?e.labels.SAVING:e.labels.SAVE)))}j.propTypes={apiCreateUrl:l.default.string,apiDetailUrl:l.default.string,canDelete:l.default.bool,commitOnEnter:l.default.bool,entityType:l.default.string,FormProps:l.default.object,labels:l.default.object,onDelete:l.default.func,onError:l.default.func,onLoad:l.default.func,onSave:l.default.func,onClose:l.default.func.isRequired,persistedObject:l.default.object,title:l.default.string},j.defaultProps={canDelete:!0,commitOnEnter:!0,FormProps:{},labels:{ADD:"Add",CANCEL:"Cancel",DELETE:"Delete",E_CREATE_DUPLICATE_RECORD:"Refused to create duplicate record",SAVE:"Save",SAVING:"Saving...",SAVE_FAIL_NOTIFICATION:"Unable to save",UPDATE:"Update"}},t.default=j},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),o=(a=r)&&a.__esModule?a:{default:a};t.default=function(){return o.default.createElement("div",{style:{flexGrow:1}})}},297:function(e,t,n){"use strict";var a=n(243);Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldMetadataMap=t.getFieldNames=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=C(n(261)),u=C(n(340)),s=C(n(2)),c=C(n(0)),f=C(n(341)),d=C(n(342)),p=C(n(343)),m=C(n(371)),h=C(n(372)),y=C(n(249)),v=n(127),b=n(262),g=n(300);function C(e){return e&&e.__esModule?e:{default:e}}function E(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(r,o){try{var l=t[r](o),i=l.value}catch(u){return void n(u)}if(!l.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(i)}("next")}))}}var O=t.getFieldNames=function e(t,n){if(!t&&!n)throw new Error("Unable to determine form field names. You must supply field arrangement or a map of field metadata");if(n){var a=[];return n.forEach((function(n){if(Array.isArray(n))a.push.apply(a,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e(t,n)));else{var r="undefined"===typeof n?"undefined":l(n);"string"===r?"---"!==n&&a.push(n):"object"===r&&a.push(n.name)}})),a}return t.filter((function(e){return!e.read_only})).map((function(e){return e.key}))},j=t.getFieldMetadataMap=function(e){return e?(0,v.arrayToObject)(e,"key"):null},P=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.setValues=function(e){var t=r({},o.state.formData,e);o.setState({formData:t})},o.setValue=function(e,t){o.setValues(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))},o.load=E(a.mark((function e(){var t,l,i,u,s,c,f,d,p,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({loading:!0}),t=o.props,l=t.defaultValues,i=t.optionsRequestParams,u=t.onLoad,s=t.persistedObject,c=s,(f=[]).push(y.default.options(o.requestUrl,r({},i,{action:o.detailUrl?"update":"create"}))),c||(o.detailUrl?f.push(y.default.get(o.detailUrl)):(c=r({},l),Object.keys(c).forEach((function(e){var t=c[e];"function"===typeof t&&(c[e]=t())})))),e.next=8,Promise.all(f);case 8:if(d=e.sent,p=d[0].jsonData,d.length>1&&(c=d[1].jsonData),m=o.initialData(p,c)){e.next=14;break}throw new Error("Failed to initialize form");case 14:o.setState({formData:m,loading:!1,metadata:p,referenceObject:c}),u&&u(c,j(p));case 16:case"end":return e.stop()}}),e,n)}))),o.save=E(a.mark((function e(){var t,r,l,u,s,c,f,d,p,m,h;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.props.updateMethod,r=o.state,l=r.formData,u=r.metadata,s=r.referenceObject,o.setState({errors:{},saving:!0}),c=null,f=null,o.detailUrl?"PATCH"===t?(d=o.initialData(u,s),p={},Object.keys(l).forEach((function(e){var t=l[e];(0,i.default)(t,d[e])||(p[e]=t)})),f=p,c="PATCH"):(f=l,c="PUT"):(f=l,c="POST"),c&&o.requestUrl&&f){e.next=8;break}throw new Error("Missing one or more required parameters for form request");case 8:return e.prev=8,f=o.coerceRequestData(f),o.props.onWillSave&&o.props.onWillSave(f),e.next=13,y.default.request(c,o.requestUrl,f);case 13:return m=e.sent,h=m.jsonData,o.setState({saving:!1,referenceObject:h}),o.props.onSave&&o.props.onSave(h,m),e.abrupt("return",h);case 20:e.prev=20,e.t0=e.catch(8),o.setState({saving:!1,errors:e.t0.response?e.t0.response.jsonData:{}}),o.props.onError&&o.props.onError(e.t0);case 24:case"end":return e.stop()}}),e,n,[[8,20]])}))),o.handleFormSubmit=function(e){e.preventDefault(),e.stopPropagation(),o.save()},o.handleFormChange=function(e){e.stopPropagation(),o.detailUrl&&o.props.autosaveDelay&&(o.autoSaveTimer&&clearTimeout(o.autoSaveTimer),o.autoSaveTimer=setTimeout((function(){o.state.saving||o.save()}),o.props.autosaveDelay))},o.handleFormFieldChange=function(e,t){var n=r({},o.state.errors);delete n[t.key],o.setState({errors:n}),o.props.onFieldChange&&o.props.onFieldChange(e,t)},o.state={errors:{},referenceObject:null,formData:null,initialData:null,metadata:null,loading:!1,saving:!1},o.autoSaveTimer=null,o.formRef=c.default.createRef(),o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"registerWidgetClass",value:function(e,t){this.widgetClassMap[e]=t}},{key:"widgetClassForType",value:function(e){return e?this.widgetClassMap[e]:null}}]),o(t,[{key:"componentDidMount",value:function(){this.load(),this.props.onMount&&this.props.onMount(this)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount&&this.props.onUnmount(this),this.autoSaveTimer&&(clearTimeout(this.autoSaveTimer),this.autoSaveTimer=null)}},{key:"componentDidUpdate",value:function(){this.props.onConfig&&this.props.onConfig({requestUrl:this.requestUrl})}},{key:"initialData",value:function(e,t){var n=this,a={},r=O(e,this.props.fieldArrangement),o=j(e);return r.forEach((function(e){var r=o[e],l=t[e];a[e]=(0,g.fromRepresentation)(l,r,n)})),(0,u.default)(a)}},{key:"coerceRequestData",value:function(e){var t=this,n=r({},e),a=j(this.state.metadata);return a&&Object.keys(e).forEach((function(r){var o=a[r],l=e[r];o&&(n[r]=(0,g.toRepresentation)(l,o,t))})),Object.assign(n,this.props.extraRequestParams),n}},{key:"render",value:function(){return this.state.loading||!this.state.referenceObject?null:c.default.createElement("form",{onSubmit:this.handleFormSubmit,onChange:this.handleFormChange,ref:this.formRef},c.default.createElement(this.props.FieldSetComponent,{errors:this.state.errors,fieldArrangement:this.props.fieldArrangement,form:this,onFieldChange:this.handleFormFieldChange,metadata:this.state.metadata,representedObject:this.state.referenceObject}),this.props.children)}},{key:"detailUrl",get:function(){var e=this.props,t=e.apiDetailUrl,n=e.apiDetailUrlPath,a=e.persistedObject,r=this.props.representedObjectId;!r&&a&&(r=a.id);var o=null;return t?o=t:a&&a.url?o=a.url:n&&r&&(o=(0,b.reverse)(n,{pk:r})),o}},{key:"requestUrl",get:function(){return this.detailUrl||this.props.apiCreateUrl}}]),t}(c.default.PureComponent);P.widgetClassMap={checkboxgroup:f.default,itemlist:p.default,modelselect:m.default,radiogroup:h.default},P.propTypes={apiCreateUrl:s.default.string,apiDetailUrl:s.default.string,apiDetailUrlPath:s.default.string,autosaveDelay:s.default.number,children:s.default.any,defaultValues:s.default.object,entityType:s.default.string,extraRequestParams:s.default.object,FieldSetComponent:s.default.func,fieldArrangement:s.default.array,fieldInfoProvider:s.default.func,onFieldChange:s.default.func,onConfig:s.default.func,onError:s.default.func,onLoad:s.default.func,onMount:s.default.func,onSave:s.default.func,onWillSave:s.default.func,onUnmount:s.default.func,optionsRequestParams:s.default.object,persistedObject:s.default.object,representedObjectId:s.default.number,updateMethod:s.default.oneOf(["PUT","PATCH"])},P.defaultProps={autosaveDelay:null,defaultValues:{},extraRequestParams:{},entityType:"",FieldSetComponent:d.default,optionsRequestParams:{},updateMethod:"PATCH"},t.default=P},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRepresentation=t.fromRepresentation=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=m(n(2)),l=n(0),i=m(l),u=m(n(279)),s=m(n(284)),c=m(n(387)),f=m(n(266)),d=n(39),p=n(58);function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){var t=e.ui.widget;return t?"string"===typeof t?t:t.type:"textfield"};t.fromRepresentation=function(e,t,n){var a=h(t),o=n.constructor.widgetClassForType(a);if(o&&o.hasOwnProperty("fromRepresentation"))return o.fromRepresentation(e,t);switch(a){case"itemlist":return e||[];case"select":return e?"object"===("undefined"===typeof e?"undefined":r(e))?e.url:e:"";case"checkboxgroup":return e.map((function(e){return e.url}));default:if("checkbox"===t.type)switch(e){case!0:case"true":case"True":return"switch"===a||"true";case!1:case void 0:case"false":case"False":case"":return"switch"!==a&&"false";default:throw new Error("Invalid boolean value: "+e)}return e||""}},t.toRepresentation=function(e,t,n){var a=h(t),r=n.constructor.widgetClassForType(a);if(r&&r.hasOwnProperty("toRepresentation"))return r.toRepresentation(e,t);var o=e;switch(!(0,p.isValue)(o)&&(0,p.isValue)(t.default)&&(o=t.default),t.type){case"date":case"datetime":return(0,p.isValue)(o)?o:"";case"number":return(0,p.isValue)(o)?parseFloat(o):null;default:return o}};var y=(0,d.makeStyles)((function(e){return e.form}));function v(e){var t=e.errorText,n=e.fieldArrangementInfo,o=(e.fieldIndex,e.fieldInfo),d=e.form,p=e.onChange,m=h(o),v=function(e){var t=e.ui,n=t.label,a=t.widget;return a&&"object"===("undefined"===typeof a?"undefined":r(a))&&a.label?a.label:n}(o),b=o.key,g=d.state.formData,C={name:b,value:g[b]};if(o.hidden||"hidden"===m)return i.default.createElement("input",a({type:"hidden"},C));Object.assign(C,{error:!!t,helperText:t||o.ui.help,label:v});var E=function(e){d.setValue(b,e),p(e,o)},O=n.widget;if(O||(O=d.constructor.widgetClassForType(m)),O)return i.default.createElement(O,a({fieldInfo:o,onChange:E},C,n));switch(m){case"switch":return function(e,t,n){return i.default.createElement(u.default,{row:!0},i.default.createElement(s.default,{control:i.default.createElement(c.default,{checked:e.value,onChange:function(e){n(e.target.checked)}}),label:e.label}))}(C,0,E);default:return function(e,t,n,r){var o=h(t),u=y(),s=a({},e,{fullWidth:!0,InputLabelProps:{classes:{root:u.inputLabel}},margin:"none",onChange:function(e){r(e.target.value)},type:t.type,variant:"outlined"});return t.choices&&(s.select=!0,s.SelectProps={native:!0}),"textarea"===o&&(s.multiline=!0,s.rows=2,s.rowsMax=20),"number"===t.type&&(s.inputProps={min:0,step:"any"}),"checkbox"===t.type&&(s.select=!0,s.SelectProps={native:!0},t.choices=[{label:"Yes",value:"true"},{label:"No",value:"false"}]),i.default.createElement(f.default,s,t.choices&&i.default.createElement(l.Fragment,null,i.default.createElement("option",null),t.choices.map((function(e){return i.default.createElement("option",{key:e.value,value:e.value},e.label)}))))}(C,o,0,E)}}v.propTypes={errorText:o.default.any,fieldArrangementInfo:o.default.object.isRequired,fieldInfo:o.default.object.isRequired,fieldIndex:o.default.number.isRequired,form:o.default.object.isRequired,onChange:o.default.func.isRequired},t.default=v},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(u){r=!0,o=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=h(n(4)),l=h(n(132)),i=h(n(2)),u=n(0),s=h(u),c=n(71),f=n(39),d=n(225),p=h(n(55)),m=n(263);function h(e){return e&&e.__esModule?e:{default:e}}var y=1e3,v=(0,f.makeStyles)((function(e){return{masterDetailView:(t={},n=e.breakpoints.up("md"),a={display:"flex",height:"100%",overflow:"auto"},n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t),listViewContainer:{borderRight:"1px solid "+e.palette.grey[400],height:"100%",overflow:"auto"},detailViewContainer:{flex:1,overflow:"auto"},detailViewTransitionEnter:{opacity:0},detailViewTransitionEnterActive:{opacity:1,transition:"opacity 1000ms"},detailViewTransitionEnterDone:{opacity:1},detailViewTransitionExit:{opacity:1},detailViewTransitionExitActive:{opacity:0,transition:"opacity 200ms"},detailViewTransitionExitDone:{opacity:0}};var t,n,a}));function b(e){var t=v(),n=e.breakpoint,i=e.className,f=e.detailPathInfo,h=e.detailViewPlaceholder,b=e.DetailViewComponent,g=e.detailViewProps,C=e.inspectedObjectLoader,E=e.itemIdKey,O=e.ListViewComponent,j=e.listViewContainerClassName,P=e.listViewProps,w=e.location,k=e.onDetailViewClose,I=(0,u.useRef)(null),x=(0,u.useState)(void 0),D=r(x,2),S=D[0],T=D[1],_=(0,u.useState)(null),A=r(_,2),R=A[0],U=A[1];(0,u.useEffect)((function(){var e=l.default.parse(w.search)[E];e?(!S||S&&e!==S[E])&&(w.state&&w.state.item&&(T(w.state.item),U(null)),C(e).then((function(e){T(e),U(null)}))):T(null)}),[w,S]);var M=(0,m.useWidth)(),F=(0,d.isWidthUp)(n,M),V=function(e){I.current.scrollTop=0,p.default.updateUrlParam(E,e[E],!1,{item:e})};if(!M)return null;var N=s.default.createElement(O,a({},P,{location:w,onNavigate:function(e){if(F)S?S[E]!==e[E]&&U(e):V(e);else{var t=f(e);p.default.navigate(t.pathname,t.qsParams,!1,{item:e})}}}));if(!F)return N;var L=null;return null===S?L=h:S&&(L=s.default.createElement(c.CSSTransition,{appear:!0,classNames:{appear:t.detailViewTransitionEnter,appearActive:t.detailViewTransitionEnterActive,enter:t.detailViewTransitionEnter,enterActive:t.detailViewTransitionEnterActive,enterDone:t.detailViewTransitionEnterDone,exit:t.detailViewTransitionExit,exitActive:t.detailViewTransitionExitActive,exitDone:t.detailViewTransitionExitDone},in:!R,onExited:function(){V(R)},timeout:{appear:y,enter:y,exit:200}},s.default.createElement(b,a({location:w,representedObject:S,onClose:k},g)))),s.default.createElement("div",{className:(0,o.default)(t.masterDetailView,i)},s.default.createElement("div",{className:(0,o.default)(t.listViewContainer,j)},N),s.default.createElement("div",{className:t.detailViewContainer,ref:I},L))}b.propTypes={breakpoint:i.default.string.isRequired,className:i.default.string,DetailViewComponent:i.default.elementType.isRequired,detailViewPlaceholder:i.default.element,detailPathInfo:i.default.func.isRequired,detailViewProps:i.default.object,inspectedObjectLoader:i.default.func.isRequired,itemIdKey:i.default.string.isRequired,listViewContainerClassName:i.default.string,ListViewComponent:i.default.elementType.isRequired,listViewProps:i.default.object,location:i.default.object.isRequired,onDetailViewClose:i.default.func},b.defaultProps={breakpoint:"md",detailViewProps:{},listViewProps:{}},t.default=b},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(u){r=!0,o=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=p(n(338)),l=p(n(2)),i=n(0),u=p(i),s=p(n(126)),c=p(n(385)),f=p(n(266)),d=p(n(339));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=e.clearable,n=e.onChange,l=e.onChangeDelay,p=e.StartIcon,m=e.value,h=e.valueTransformer,y=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["clearable","onChange","onChangeDelay","StartIcon","value","valueTransformer"]),v=(0,i.useState)(m),b=r(v,2),g=b[0],C=b[1];(0,i.useEffect)((function(){m!==g&&O(m)}),[m]);var E=(0,i.useRef)((0,o.default)((function(e){n(e)}),l,{leading:!1,trailing:!0})),O=function(e){var t=e;h&&(t=h(t)),C(t),l?E.current(t):n(t)},j={};return p&&(j.startAdornment=u.default.createElement(c.default,{position:"start"},u.default.createElement(p,null))),t&&(j.endAdornment=g?u.default.createElement(c.default,{position:"end"},u.default.createElement(s.default,{edge:"end",onClick:function(){return O("")},size:"small"},u.default.createElement(d.default,{fontSize:"small"}))):null),u.default.createElement(f.default,a({InputProps:j,onChange:function(e){return O(e.target.value)},value:g},y))}m.propTypes={clearable:l.default.bool,onTimeout:l.default.func,placeholder:l.default.string,onChangeDelay:l.default.number,StartIcon:l.default.elementType,value:l.default.oneOfType([l.default.string,l.default.number]),valueTransformer:l.default.func,variant:l.default.string},m.defaultProps={clearable:!0,onChangeDelay:300,value:"",variant:"standard"},t.default=m},341:function(e,t,n){"use strict";var a=n(243);Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(u){r=!0,o=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=k(n(4)),u=n(0),s=k(u),c=k(n(2)),f=k(n(125)),d=k(n(250)),p=k(n(305)),m=k(n(251)),h=k(n(284)),y=k(n(279)),v=k(n(200)),b=k(n(267)),g=k(n(45)),C=n(39),E=k(n(265)),O=k(n(277)),j=k(n(249)),P=n(127),w=n(263);function k(e){return e&&e.__esModule?e:{default:e}}var I=(0,C.makeStyles)((function(e){return{defaultFieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend,borderlessFieldset:{border:"none",padding:0},formGroup:{padding:"0 "+e.spacing(.5)+"px"},checkbox:{padding:e.spacing(.5)},linearProgress:{flex:1}}}));function x(e,t){var n=l({},e);return t?(Object.keys(t).forEach((function(a){n[t[a]]=e[a]})),n):n}function D(e){var t=this,n=e.fieldInfo,c=e.label,C=(0,u.useState)(n.choices||null),k=o(C,2),D=k[0],S=k[1],T=(0,u.useState)(!1),_=o(T,2),A=_[0],R=_[1],U=D?(0,P.arrayToObject)(D,"label"):{},M=D?(0,P.arrayToObject)(D,"value"):{},F={};n.ui&&"object"===r(n.ui.widget)&&(F=n.ui.widget);var V,N=F.exclusionMap||{},L=F.implicitSelectionMap||{},q=new Set(e.value||[]),K=F.list_endpoint;!K&&n.related_endpoint&&(K=n.related_endpoint.singular+"/"),(0,w.useInit)((V=a.mark((function e(){var r,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.choices){e.next=4;break}S(n.choices),e.next=13;break;case 4:if(!K){e.next=12;break}return r=F.filter_params||{},e.next=8,j.default.get(K,r);case 8:o=e.sent,S(o.jsonData.map((function(e){return x(e,F.choice_map)}))),e.next=13;break;case 12:throw new Error('"choices" or "related_endpoint" must be present in fieldInfo');case 13:case"end":return e.stop()}}),e,t)})),function(){var e=V.apply(this,arguments);return new Promise((function(t,n){return function a(r,o){try{var l=e[r](o),i=l.value}catch(u){return void n(u)}if(!l.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(i)}("next")}))}));var W=function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=Object.keys(L)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var l=r.value,i=U[l].value;if(q.has(i)){var u=!0,s=!1,c=void 0;try{for(var f,d=L[l][Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value,m=U[p];if(e.value===m.value)return!0}}catch(h){s=!0,c=h}finally{try{!u&&d.return&&d.return()}finally{if(s)throw c}}}}}catch(h){n=!0,a=h}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}return!1},B=function(t){return function(n){var a=new Set(q);if(n.target.checked){a.add(t.value);var r=t.label,o=N[r];o&&Array.from(a).forEach((function(e){var t=M[e];-1!==o.indexOf(t.label)&&a.delete(e)}));var l=L[r];l&&l.forEach((function(e){var t=U[e];a.add(t.value)}))}else a.delete(t.value);e.onChange(Array.from(a))}},z=function(){R(!1)},G=I(),H=[];!1===F.border?H.push(G.borderlessFieldset):H.push(G.defaultFieldset);var J=l({},F.formGroupProps||{});return J.className=G.formGroup,s.default.createElement(m.default,{fullWidth:!0,margin:"none"},s.default.createElement("fieldset",{className:(0,i.default)(H)},c&&s.default.createElement("legend",{className:G.legend},c),D?s.default.createElement(u.Fragment,null,s.default.createElement(y.default,J,D.map((function(e){var t={};F.minLabelWidth&&(t.minWidth=F.minLabelWidth);var n=s.default.createElement(g.default,{style:t},e.label);return e.tooltip&&(n=s.default.createElement(b.default,{title:e.tooltip},n)),s.default.createElement(h.default,{key:e.value,control:s.default.createElement(p.default,{disabled:W(e),className:G.checkbox,checked:q.has(e.value),onChange:B(e),value:e.value}),label:n})}))),K&&F.create_endpoint&&s.default.createElement(u.Fragment,null,s.default.createElement(f.default,{color:"primary",onClick:function(){R(!0)},size:"small",startIcon:s.default.createElement(E.default,null)},"Add ",F.entity_type,"..."),A&&s.default.createElement(O.default,{apiCreateUrl:F.create_endpoint,defaultValues:F.filter_params,entityType:F.entity_type,onClose:z,onSave:function(e){var t=x(e,F.choice_map);S([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(D),[t])),z()}}))):s.default.createElement(d.default,{display:"flex",alignItems:"center",height:30},s.default.createElement(v.default,{className:G.linearProgress}))))}D.propTypes={fieldInfo:c.default.object.isRequired,label:c.default.string,onChange:c.default.func.isRequired,value:c.default.any},t.default=D},342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=c(n(2)),o=c(n(0)),l=c(n(386)),i=c(n(299)),u=c(n(300)),s=n(297);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=e.errors,n=e.fieldInfoProvider,r=e.form,c=e.onFieldChange,f=e.metadata,d=(0,s.getFieldMetadataMap)(f),p=e.fieldArrangement;p||(p=[],f.forEach((function(e){if(!e.read_only){var t=e.key;n?p.push(n(e)):p.push({name:t})}})));var m=function(e,t){c(e,t)};return o.default.createElement(i.default,{container:!0},function e(n,s,c){return n.map((function(n,f){var p=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s),[f]),h=p.join(":");if(Array.isArray(n))return e(n,p,{xs:12,md:Math.floor(12/n.length)});"string"===typeof n&&(n={name:n});var y=n.name;return o.default.createElement(i.default,a({container:!0,item:!0,key:h,xs:12,style:{padding:8}},c),"---"===y?o.default.createElement(l.default,{style:{margin:"16px 0 16px 0",flexGrow:1}}):o.default.createElement(u.default,{errorText:t[y],form:r,fieldIndex:f,fieldInfo:d[y],fieldArrangementInfo:n,onChange:m}))}))}(p,[0]))}f.propTypes={errors:r.default.object,form:r.default.object.isRequired,fieldArrangement:r.default.array,fieldInfoProvider:r.default.func,onFieldChange:r.default.func.isRequired,metadata:r.default.array},t.default=f},343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=p(n(261)),l=p(n(0)),i=p(n(2)),u=p(n(251)),s=p(n(344)),c=n(127),f=p(n(280)),d=p(n(368));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectRef=l.default.createRef(),n.handleItemListAdd=n.handleItemListAdd.bind(n),n.handleItemListRemove=n.handleItemListRemove.bind(n),n.handleItemListUpdate=n.handleItemListUpdate.bind(n),n.dispatchChangeEvent=n.dispatchChangeEvent.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"toRepresentation",value:function(e){return e.map((function(e){return e.url}))}}]),r(t,[{key:"componentDidUpdate",value:function(e){(0,o.default)(this.props.value,e.value)||this.updateOptions(this.props.value)}},{key:"updateOptions",value:function(e){for(var t=this.selectRef.current,n=t.options,a=n.length-1;a>=0;--a)t.remove(n[a]);e.forEach((function(e){var n=document.createElement("option");n.value=e.url,n.text=e.url,n.selected=!0,t.add(n)}));var r=new Event("change",{bubbles:!0,cancelable:!0});t.dispatchEvent(r)}},{key:"handleItemListAdd",value:function(e){var t=this.props.value.slice().concat(e);this.dispatchChangeEvent(t)}},{key:"handleItemListRemove",value:function(e){var t=(0,c.removeObject)(this.props.value,"id",e.id);this.dispatchChangeEvent(t)}},{key:"handleItemListUpdate",value:function(e,t){var n=this.props.value.slice();n[t]=e,this.dispatchChangeEvent(n)}},{key:"dispatchChangeEvent",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.label;return l.default.createElement(u.default,{fullWidth:!0,margin:"none"},l.default.createElement("fieldset",{className:t.fieldset},n&&l.default.createElement("legend",{className:t.legend},n),l.default.createElement("select",{multiple:!0,name:this.props.name,ref:this.selectRef,style:{display:"none"}}),l.default.createElement(d.default,{apiCreateUrl:this.props.createUrl,apiListUrl:this.listUrl,clickAction:"edit",editDialogProps:this.props.editDialogProps,entityType:this.props.entityType,filterParams:this.props.filterParams,items:this.props.value,itemKeyPath:this.props.itemKeyPath,listDialogProps:a({fullWidth:!0},this.props.listDialogProps),listItemComponent:this.props.listItemComponent,listItemProps:this.props.listItemProps,mode:"edit",onAdd:this.handleItemListAdd,onRemove:this.handleItemListRemove,onUpdate:this.handleItemListUpdate,searchFilterParam:this.props.searchFilterParam,titleKey:this.props.titleKey})))}},{key:"listUrl",get:function(){return this.props.fieldInfo.related_endpoint.singular+"/"}}]),t}(l.default.PureComponent);m.propTypes={classes:i.default.object.isRequired,createUrl:i.default.string,editDialogProps:i.default.object,entityType:i.default.string.isRequired,filterParams:i.default.object,itemKeyPath:i.default.string,listDialogProps:i.default.object,listItemComponent:i.default.func,listItemProps:i.default.object,label:i.default.string,name:i.default.string.isRequired,onChange:i.default.func,searchFilterParam:i.default.string,titleKey:i.default.any.isRequired,value:i.default.array.isRequired},m.defaultProps={editDialogProps:{},filterParams:{},listDialogProps:{},listItemComponent:f.default,listItemProps:{}},t.default=(0,s.default)((function(e){return{fieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend}}))(m)},368:function(e,t,n){"use strict";var a=n(243);Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=x(n(4)),i=x(n(2)),u=n(0),s=x(u),c=n(46),f=x(n(125)),d=x(n(126)),p=x(n(246)),m=x(n(206)),h=x(n(208)),y=x(n(201)),v=x(n(209)),b=x(n(45)),g=n(39),C=x(n(265)),E=x(n(369)),O=x(n(370)),j=x(n(99)),P=x(n(249)),w=n(72),k=x(n(277)),I=x(n(276));function x(e){return e&&e.__esModule?e:{default:e}}function D(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(r,o){try{var l=t[r](o),i=l.value}catch(u){return void n(u)}if(!l.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(i)}("next")}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var _=(0,g.makeStyles)((function(e){return{listItem:{padding:e.spacing(.25,0)},listItemWithIcon:{display:"inline-grid",gridColumnGap:4,gridTemplateColumns:"24px 1fr"},listItemEditable:{display:"inline-grid",gridColumnGap:4,gridTemplateColumns:"24px 1fr min-content"},listItemText:{margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},removeIconRoot:{minWidth:"unset","&:hover":{color:e.palette.primary.main,cursor:"pointer"}},editIconButton:{marginRight:e.spacing(.5),padding:e.spacing(.25),"&:hover":{color:e.palette.primary.main}},listItemIconRoot:{alignSelf:"baseline",minWidth:20},listItemIcon:{fontSize:e.typography.pxToRem(22)}}}));function A(e){var t=e.item,n=e.onChange,a=_(),r=null;if(e.component)r=s.default.createElement(e.component,o({item:t,onChange:n},e.componentProps));else{var i=b.default,u=o({},e.componentProps,{onClick:function(){e.onClick(t)},onChange:n});t.path?(i=p.default,u.component=c.Link,u.to=t.path,u.target="_blank",u.noWrap=!0):t.media_url&&(i=p.default,u.href=t.media_url,u.rel="noopener",u.target="_blank");var f=null;f="function"===typeof e.titleKey?e.titleKey(t):(0,w.valueForKeyPath)(t,e.titleKey),r=s.default.createElement(v.default,{className:a.listItemText,primary:s.default.createElement(i,u,f)})}var m=[a.listItem];return e.icon&&m.push(a.listItemWithIcon),"edit"===e.mode&&"edit"===e.clickAction&&m.push(a.listItemEditable),s.default.createElement(h.default,o({className:(0,l.default)(m)},e.listItemProps),"view"===e.mode&&e.icon&&s.default.createElement(y.default,{classes:{root:a.listItemIconRoot}},s.default.createElement(e.icon,{className:a.listItemIcon})),e.onRemove&&"edit"===e.mode&&s.default.createElement(y.default,{"aria-label":"Delete",classes:{root:a.removeIconRoot},onClick:function(){e.onRemove(t)}},s.default.createElement(E.default,null)),r,"edit"===e.mode&&"edit"===e.clickAction&&s.default.createElement("div",null,s.default.createElement(d.default,{"aria-label":"Edit",className:a.editIconButton,edge:"end",onClick:function(){e.onEdit(t)}},s.default.createElement(O.default,null))))}A.propTypes={clickAction:i.default.string,component:i.default.func,componentProps:i.default.object,icon:i.default.object,item:i.default.object.isRequired,listItemProps:i.default.object,mode:i.default.oneOf(["view","edit"]),onClick:i.default.func.isRequired,onChange:i.default.func,onEdit:i.default.func,onRemove:i.default.func,titleKey:i.default.any},A.defaultProps={listItemProps:{}};var R=function(e){function t(){var e,n,r,o=this;S(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={editDialogOpen:!1,editingObject:null,listDialogOpen:!1},r.keyForItem=function(e){var t=r.props.itemIdKey;return"function"===typeof t?t(e):e[t]},r.attachRecords=function(){var e=D(a.mark((function e(t){var n,l,i,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!r.attachUrl){e.next=13;break}return n=t.map((function(e){return e.id})),l=1===n.length?n[0]:n,e.next=8,P.default.post(r.attachUrl,{item_id:l});case 8:i=e.sent,u=i.jsonData,r.props.onAdd&&r.props.onAdd(u),e.next=14;break;case 13:r.props.onAdd&&r.props.onAdd(t);case 14:r.handleEditDialogClose();case 15:case"end":return e.stop()}}),e,o)})));return function(t){return e.apply(this,arguments)}}(),r.removeRecord=function(){var e=D(a.mark((function e(t){var n,l,i,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,l=n.canDelete,i=n.onRemove,!r.detachUrl){e.next=9;break}return e.next=5,P.default.delete(r.detachUrl,{item_id:t.id});case 5:u=e.sent,t=u.jsonData,e.next=12;break;case 9:if(!l||!t.url){e.next=12;break}return e.next=12,P.default.delete(t.url);case 12:i&&i(t);case 13:case"end":return e.stop()}}),e,o)})));return function(t){return e.apply(this,arguments)}}(),r.handleRemoveButtonClick=function(){var e=D(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.warnOnDelete?j.default.confirm({title:"Please Confirm",description:"Are you sure you want to remove this item?",confirmButtonTitle:"Remove",onDismiss:function(e){e&&r.removeRecord(t)}}):r.removeRecord(t);case 1:case"end":return e.stop()}}),e,o)})));return function(t){return e.apply(this,arguments)}}(),r.handleEditButtonClick=function(e){"edit"===r.props.mode&&"edit"===r.props.clickAction&&r.setState({editDialogOpen:!0,editingObject:e})},r.handleAddButtonClick=function(){r.props.apiListUrl?r.setState({listDialogOpen:!0}):r.setState({editDialogOpen:!0,editingObject:null})},r.handleListDialogDismiss=function(e){e&&r.attachRecords(e),r.setState({listDialogOpen:!1})},r.handleItemClick=function(e){r.props.onItemClick&&r.props.onItemClick(e)},r.handleItemChange=function(e){var t=r.items,n=t.findIndex((function(t){return t.id===e.id}));-1!==n&&(t[n]=e,r.props.onUpdate&&r.props.onUpdate(e,n))},r.handleEditDialogClose=function(){r.setState({editDialogOpen:!1})},T(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.classes,t.clickAction),a=t.mode;return s.default.createElement(u.Fragment,null,s.default.createElement(m.default,{disablePadding:!0,className:this.props.className},this.items.map((function(t){return s.default.createElement(A,{clickAction:n,component:e.props.itemComponent,componentProps:e.props.itemComponentProps,key:e.keyForItem(t),icon:e.props.itemIcon,item:t,itemKeyPath:e.props.itemKeyPath,listItemProps:e.props.itemListItemProps,mode:a,onChange:e.handleItemChange,onClick:e.handleItemClick,onEdit:e.handleEditButtonClick,onRemove:e.handleRemoveButtonClick,titleKey:e.props.titleKey})}))),"edit"===a&&s.default.createElement(u.Fragment,null,this.props.onAdd&&s.default.createElement(f.default,{color:"primary",onClick:this.handleAddButtonClick,size:"small",startIcon:s.default.createElement(C.default,null)},"Add ",this.props.entityType),this.props.apiListUrl&&this.state.listDialogOpen&&s.default.createElement(I.default,o({apiCreateUrl:this.props.apiCreateUrl,filterParams:this.props.filterParams,displayMode:"list",editDialogProps:this.props.editDialogProps,entityType:this.props.entityType,listItemComponent:this.props.listItemComponent,listItemProps:this.props.listItemProps,onDismiss:this.handleListDialogDismiss,searchFilterParam:this.props.searchFilterParam,src:this.props.apiListUrl,title:"Choose "+this.props.entityType},this.props.listDialogProps))),this.state.editDialogOpen&&s.default.createElement(this.props.EditDialogComponent,o({apiCreateUrl:this.props.apiCreateUrl,apiDetailUrl:this.state.editingObject?this.state.editingObject.url:null,entityType:this.props.entityType,onClose:this.handleEditDialogClose,onSave:this.handleItemChange},this.props.editDialogProps)))}},{key:"attachUrl",get:function(){var e=this.props,t=e.apiAttachSuffix,n=e.representedObject;return void 0===t||null===t?null:n.url+t}},{key:"detachUrl",get:function(){var e=this.props,t=e.apiDetachSuffix,n=e.representedObject;return void 0===t||null===t?null:n.url+t}},{key:"items",get:function(){var e=this.props,t=e.items,n=e.itemKeyPath;return n?t.map((function(e){return(0,w.valueForKeyPath)(e,n)})):t}}]),t}(s.default.PureComponent);R.propTypes={apiCreateUrl:i.default.string,apiListUrl:i.default.string,apiAttachSuffix:i.default.string,apiDetachSuffix:i.default.string,canDelete:i.default.bool,className:i.default.string,clickAction:i.default.oneOf(["link","edit"]),EditDialogComponent:i.default.func,editDialogProps:i.default.object,entityType:i.default.string,filterParams:i.default.object,itemComponent:i.default.func,itemComponentProps:i.default.object,itemListItemProps:i.default.object,itemIcon:i.default.object,items:i.default.array.isRequired,itemIdKey:i.default.oneOfType([i.default.string,i.default.func]),itemKeyPath:i.default.string,listDialogProps:i.default.object,listItemComponent:i.default.func,listItemProps:i.default.object,onItemClick:i.default.func,onAdd:i.default.func,onRemove:i.default.func,onUpdate:i.default.func,mode:i.default.oneOf(["view","edit"]),representedObject:i.default.object,searchFilterParam:i.default.string,titleKey:i.default.any,warnOnDelete:i.default.bool},R.defaultProps={canDelete:!1,clickAction:"link",EditDialogComponent:k.default,editDialogProps:{},filterParams:{},itemIdKey:"id",itemComponentProps:{},itemListItemProps:{disableGutters:!0},listItemProps:{},listDialogProps:{},mode:"view",warnOnDelete:!0},t.default=R},371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=m(n(0)),l=m(n(2)),i=m(n(250)),u=m(n(125)),s=m(n(251)),c=m(n(126)),f=n(39),d=m(n(295)),p=m(n(276));function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClearButtonClick=function(){n.selectedModel=null},n.handleListDialogDismiss=function(e){e&&e.length&&(n.selectedModel=e[0]),n.setState({listDialogOpen:!1})},n.state={listDialogOpen:!1,selectedModel:e.value,buttonLabel:""},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"toRepresentation",value:function(e){return e?e.url:null}}]),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.fieldInfo,l=t.label,f=t.listDialogProps,m=r.related_endpoint.singular+"/";return o.default.createElement(s.default,{fullWidth:!0,margin:"none"},o.default.createElement("fieldset",{className:n.fieldset},l&&o.default.createElement("legend",{className:n.legend},l),o.default.createElement(i.default,{display:"flex",alignItems:"center",justifyContent:"space-between"},o.default.createElement(u.default,{color:"primary",className:n.button,onClick:function(){e.setState({listDialogOpen:!0})},size:"small"},this.buttonLabel),this.selectedModel&&o.default.createElement(c.default,{className:n.clearButton,onClick:function(){e.selectedModel=null}},o.default.createElement(d.default,null)))),this.state.listDialogOpen&&o.default.createElement(p.default,a({},f,{apiCreateUrl:m,onDismiss:this.handleListDialogDismiss,selectionMode:"single",src:m,title:"Select "+r.ui.label})))}},{key:"buttonLabel",get:function(){var e=this.state.selectedModel,t=this.props,n=t.listDialogProps,a=t.titleKey;return e?"function"===typeof a?a(e):e[a]:"Choose "+(n.entityType||"Option")+"..."}},{key:"selectedModel",get:function(){return this.state.selectedModel},set:function(e){this.setState({selectedModel:e}),this.props.onChange&&this.props.onChange(e)}}]),t}(o.default.PureComponent);h.propTypes={classes:l.default.object.isRequired,label:l.default.string,listDialogProps:l.default.object,titleKey:l.default.oneOfType([l.default.func,l.default.string]),value:l.default.any},h.defaultProps={listDialogProps:{}},t.default=(0,f.withStyles)((function(e){return{fieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend,button:{minWidth:"initial"},clearButton:{padding:6}}}))(h)},372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(u){r=!0,o=u}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(0),o=f(r),l=f(n(2)),i=f(n(251)),u=f(n(284)),s=f(n(306)),c=f(n(388));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,n(39).makeStyles)((function(e){return{fieldset:e.form.customControl.fieldset,legend:e.form.customControl.legend,radioGroup:{padding:"0 "+e.spacing(1)+"px"},radio:{padding:e.spacing(.5)}}}));function p(e){var t=e.fieldInfo,n=e.label,l=e.onChange,f=d(),p=(0,r.useState)(e.value),m=a(p,2),h=m[0],y=m[1];return o.default.createElement(i.default,{fullWidth:!0,margin:"none"},o.default.createElement("fieldset",{className:f.fieldset},n&&o.default.createElement("legend",{className:f.legend},n),o.default.createElement(c.default,{className:f.radioGroup,row:"row"===t.ui.direction,value:h},t.choices.map((function(e){return o.default.createElement(u.default,{control:o.default.createElement(s.default,{onClick:function(){!function(e){var t=e.value;t===h&&(t=null),y(t),l(t)}(e)},className:f.radio}),key:e.value,label:e.label,value:e.value})})))))}p.propTypes={fieldInfo:l.default.object.isRequired,label:l.default.string,onChange:l.default.func.isRequired,value:l.default.any},t.default=p},402:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(6),o=n(0),l=n(104),i=n(322),u=n.n(i),s=n(55),c=n.n(s),f=n(247),d=n.n(f),p=n(262),m=n(85),h=n(221),y=n(110),v=n(222),b=n(275),g=n.n(b),C=n(276),E=n.n(C),O=n(245),j=n.n(O),P=n(108),w=n.n(P),k=n(381),I=n(219),x=n(220),D=n(280),S=n.n(D);var T=function(e){var t=e.displayRate,n=Object(k.a)(e,["displayRate"]),o=e.item,l=o.currency,i=o.rate;return Object(r.jsxs)(S.a,Object(a.a)(Object(a.a)({},Object(D.listItemProps)(n)),{},{children:[Object(r.jsx)(I.a,{children:Object(r.jsx)("img",{alt:"",className:"flag flag-".concat(l)})}),Object(r.jsx)(x.a,{primary:l,secondary:t?i:null})]}))},_=(n(303),n(41)),A=Object(l.a)((function(e){return{toolbar:{paddingLeft:12},listViewLoading:{opacity:.5}}}));var R=function(e){var t=A(),n=c.a.qsParams.base,a=Object(o.useState)(!1),l=Object(m.a)(a,2),i=l[0],u=l[1];Object(o.useEffect)((function(){if(!n){var e=w.a.localValue("baseCurrency");e||(e="USD",w.a.setLocalValue("baseCurrency",e)),c.a.updateUrlParam("base",e)}}),[n]);var s=function(e){var t=e.jsonData.rates;return{items:Object.keys(t).filter((function(e){return e.toUpperCase()!==n.toUpperCase()})).sort().map((function(e){return{base:n,currency:e,rate:t[e]}}))}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.a,{bar:Object(r.jsx)(h.a,{position:"relative",color:"default",elevation:1,children:n&&Object(r.jsx)(v.a,{className:t.toolbar,disableGutters:!0,variant:"dense",children:Object(r.jsx)(y.a,{onClick:function(){return u(!0)},startIcon:Object(r.jsx)("img",{alt:"",className:"flag flag-".concat(n)}),children:"Base Currency"})})}),barSize:48,placement:"top",scrollContent:!0,children:n&&Object(r.jsx)(g.a,{classes:{listViewLoading:t.listViewLoading},displayMode:"list",itemIdKey:"currency",listItemComponent:T,listItemProps:{displayRate:!0,onItemClick:function(t){e.onNavigate(t)}},responseTransformer:s,src:"".concat(_.b,"/latest"),filterParams:{base:n}})}),i&&Object(r.jsx)(E.a,{displayMode:"list",itemIdKey:"currency",listItemComponent:T,onDismiss:function(e){e&&c.a.updateUrlParam("base",e[0].currency),u(!1)},responseTransformer:s,selectionMode:"single",src:"".concat(_.b,"/latest"),title:"Select a base currency"})]})},U=n(307),M=n(44),F=n(107),V=n.n(F),N=Object(l.a)((function(e){return{main:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",padding:e.spacing(1)},accountBalanceIcon:{fontSize:e.typography.pxToRem(120),marginBottom:10}}}));var L=function(e){var t=N();return Object(r.jsxs)("main",{className:t.main,children:[Object(r.jsx)(V.a,{className:t.accountBalanceIcon}),Object(r.jsx)(M.a,{variant:"h1",children:"Foreign Currency Exchange"})]})},q=n(37),K=Object(l.a)((function(e){return{listViewContainer:{width:300}}}));t.default=function(e){var t=K(),n=e.location,o=c.a.qsParams,l=o.base;return Object(r.jsx)(d.a,Object(a.a)(Object(a.a)({title:"Foreign Exchange"},e),{},{children:Object(r.jsx)(u.a,{DetailViewComponent:U.a,detailViewPlaceholder:Object(r.jsx)(L,{}),detailPathInfo:function(e){return{pathname:Object(p.reverse)(q.a.forex.currency,{currency:e.currency}),qsParams:{base:l}}},detailViewProps:{base:l,currency:o.currency},inspectedObjectLoader:function(e){return new Promise((function(t,n){t({currency:e})}))},itemIdKey:"currency",listViewContainerClassName:t.listViewContainer,ListViewComponent:R,location:n})}))}}}]);